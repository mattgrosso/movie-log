(function(){"use strict";var e={5235:function(e,t,s){var a=s(9242),o=s(3396);const i={class:"movie-log"};function r(e,t,s,a,r,n){const l=(0,o.up)("Header"),c=(0,o.up)("router-view"),d=(0,o.up)("Footer");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(l),(0,o.Wm)(c),(0,o.Wm)(d)])}var n=s(7139);const l={class:"col-12 d-flex justify-content-between align-items-center"},c=(0,o.uE)('<div><a href="mailto:mattgrosso+movielog@gmail.com"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope" viewBox="0 0 16 16"><path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"></path></svg></a><a href="https://github.com/mattgrosso/movie-log"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a></div>',1);function d(e,t,s,a,i,r){return(0,o.wg)(),(0,o.iD)("footer",l,[(0,o._)("span",null," Â© "+(0,n.zw)((new Date).getFullYear())+" - Matt Grosso ",1),c])}var u={},h=s(89);const g=(0,h.Z)(u,[["render",d]]);var p=g;const m={class:"overflow-wrapper"},v=["src"],w={key:0,class:"dev-mode-flag"},y=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-gear-wide-connected",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434l.071-.286zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5zm0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78h4.723zM5.048 3.967c-.03.021-.058.043-.087.065l.087-.065zm-.431.355A4.984 4.984 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8 4.617 4.322zm.344 7.646.087.065-.087-.065z"})],-1),b=[y],f={key:0},_={key:1};function k(e,t,s,a,i,r){return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["header col-12",{"d-none":!e.$store.state.showHeader}])},[(0,o._)("div",m,[(0,o._)("div",{class:(0,n.C_)(["poster-grid",r.posterCount])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.postersForHeader,((e,t)=>((0,o.wg)(),(0,o.iD)("img",{src:e,key:t},null,8,v)))),128))],2),r.devMode?((0,o.wg)(),(0,o.iD)("div",w," Dev Mode! ")):(0,o.kq)("",!0),(0,o._)("div",{class:"settings-link",onClick:t[0]||(t[0]=(...e)=>r.toggleSettings&&r.toggleSettings(...e))},b),(0,o._)("div",{class:(0,n.C_)(["home-link",r.posterCount]),onClick:t[1]||(t[1]=(...e)=>r.goHome&&r.goHome(...e))},[r.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("span",f,"TV Log")):((0,o.wg)(),(0,o.iD)("span",_,"Movie Log"))],2)])],2)}s(7658);var T={data(){return{showSettings:!1}},computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog},allPostersRanked(){const e=[...this.$store.getters.allMediaAsArray];return e.sort(this.sortByRating).map((e=>`https://image.tmdb.org/t/p/w94_and_h141_bestv2${this.topStructure(e).poster_path}`))},postersForHeader(){return this.$store.getters.allMediaAsArray.length<24?[this.randomBanner()]:this.$store.getters.allMediaAsArray.length<120?this.allPostersRanked.slice(0,24):this.allPostersRanked.slice(0,120)},posterCount(){return this.$store.getters.allMediaAsArray.length<24?"single":this.$store.getters.allMediaAsArray.length<120?"twenty-four":"one-twenty"},devMode(){return this.$store.getters.devMode}},methods:{toggleSettings(){this.$el.querySelector(".settings-link").classList.toggle("rotated"),"Settings"===this.$router.currentRoute.value.name?this.$router.push("/"):this.$router.push("/settings")},mostRecentRating(e){if(this.currentLogIsTVLog)return e.ratings.tvShow;{let t=e.ratings[0];return e.ratings.forEach((e=>{e.date&&e.date>t.date?t=e:t.date||(t=e)})),t}},sortByRating(e,t){const s=this.mostRecentRating(e).rating,a=this.mostRecentRating(t).rating;return s<a?1:s>a?-1:0},randomBanner(){const e=Math.floor(Math.random()*this.$store.getters.allMediaAsArray.length);return this.$store.getters.allMediaAsArray[e]?`https://image.tmdb.org/t/p/original${this.topStructure(this.$store.getters.allMediaAsArray[e]).backdrop_path}`:"https://www.solidbackgrounds.com/images/1920x1080/1920x1080-black-solid-color-background.jpg"},async goHome(){await this.$store.commit("setGoHome",!0),this.$router.push("/")},topStructure(e){return this.currentLogIsTVLog?e.tvShow:e.movie}}};const S=(0,h.Z)(T,[["render",k]]);var D=S,R={name:"Movie-Log",components:{Footer:p,Header:D}};const V=(0,h.Z)(R,[["render",r]]);var L=V,$=(s(541),s(65)),x=s(7795),C=s(7130),M=s(6070),B=s(7750);const A=(e,t)=>e.vote_count<t.vote_count?1:e.vote_count>t.vote_count?-1:0,O=e=>{if(e.ratings.tvShow)return e.ratings.tvShow;{let t=e.ratings[0];return e.ratings.forEach((e=>{const s=e.date?new Date(e.date).getTime():0,a=t.date?new Date(t.date).getTime():0;t.date?s&&s>a&&(t=e):t=e})),t}},z=(e,t)=>{const s=O(e).rating,a=O(t).rating;return s<a?1:s>a?-1:0},I=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&("object"===typeof e[t]&&null!==e[t]?I(e[t]):(Number.isNaN(e[t])||void 0===e[t])&&(B.uT(`NaN or undefined value found in ${t}. The Object was ${JSON.stringify(e)}`),delete e[t]));return e},E={databaseURL:"https://movie-log-8c4d5-default-rtdb.firebaseio.com"};(0,x.ZF)(E);const F=(0,C.N8)();var K=(0,$.MT)({state:{currentLog:"movieLog",movieLog:{},tvLog:{},settings:{},googleLogin:null,databaseTopKey:null,newEntrySearchResults:[],movieToRate:{},tvShowToRate:{},DBSearchValue:null,DBSearchType:null,DBSortValue:null,DBSortOrder:null,showHeader:!0,goHome:!1,devModeTopKey:"testing-database"},getters:{allMediaAsArray:e=>"tvLog"===e.currentLog?Object.keys(e.tvLog).map((t=>{const s=e.tvLog[t];return s.dbKey=t,s})):Object.keys(e.movieLog).map((t=>{const s=e.movieLog[t];return s.dbKey=t,s})),allMoviesAsArray:e=>Object.keys(e.movieLog).map((t=>e.movieLog[t])),allTVShowsAsArray:e=>Object.keys(e.tvLog).map((t=>e.tvLog[t])),allMediaSortedByRating:(e,t)=>t.allMediaAsArray.sort(z),databaseTopKey(e){return e.databaseTopKey},devMode(e){return e.databaseTopKey===e.devModeTopKey}},mutations:{setCurrentLog(e,t){e.currentLog=t},setMovieLog(e,t){e.movieLog=Object.freeze(t)},setTVLog(e,t){e.tvLog=Object.freeze(t)},setSettings(e,t){e.settings=t},setGoogleLogin(e,t){e.googleLogin=t},setDatabaseTopKey(e,t){e.databaseTopKey=t.replaceAll(/[-!$%@^&*()_+|~=`{}[\]:";'<>?,./]/g,"-")},setNewEntrySearchResults(e,t){const s=[...t],a=s.sort(A);e.newEntrySearchResults=a},setMovieToRate(e,t){e.movieToRate=t},setTVShowToRate(e,t){e.tvShowToRate=t},setDBSearchValue(e,t){e.DBSearchValue=t},setDBSearchType(e,t){e.DBSearchType=t},setDBSortValue(e,t){e.DBSortValue=t},setDBSortOrder(e,t){e.DBSortOrder=t},setShowHeader(e,t){e.showHeader=t},setGoHome(e,t){e.goHome=t}},actions:{async login(e,t){const s=JSON.parse(window.localStorage.getItem("devMode")),a=(0,M.KQ)(t.credential);e.commit("setGoogleLogin",a.email),s?e.commit("setDatabaseTopKey",e.state.devModeTopKey):e.state.googleLogin?e.commit("setDatabaseTopKey",e.state.googleLogin):B.uT("Login attempted but the user data didn't work"),await e.dispatch("resetLocalDB")},async resetLocalDB(e){e.commit("setMovieLog",{}),e.commit("setTVLog",{}),e.commit("setSettings",{}),await e.dispatch("initializeDB")},async initializeDB(e){if(!e.state.databaseTopKey)return;window.localStorage.setItem("databaseTopKey",e.state.databaseTopKey);const t=Boolean(Object.keys(e.state.movieLog).length);t||(0,C.jM)((0,C.iH)(F,`${e.state.databaseTopKey}/movieLog`),(t=>{const s=t.val();s&&e.commit("setMovieLog",s)}));const s=Boolean(Object.keys(e.state.tvLog).length);s||(0,C.jM)((0,C.iH)(F,`${e.state.databaseTopKey}/tvLog`),(t=>{const s=t.val();s&&e.commit("setTVLog",s)}));const a=Boolean(Object.keys(e.state.settings).length);a||(0,C.jM)((0,C.iH)(F,`${e.state.databaseTopKey}/settings`),(t=>{const s=t.val();s&&e.commit("setSettings",s)}))},async initiateNewDatabase(e){if(!e.state.databaseTopKey)return;const t={movieLog:{},tvLog:{},settings:{tags:{"viewing-tags":{title:"default viewing tag"},"movie-tags":{title:"default movie tag"}},weights:[{name:"direction",weight:1.015},{name:"imagery",weight:.9},{name:"impression",weight:1.9},{name:"love",weight:2.985},{name:"overall",weight:2.05},{name:"performance",weight:.65},{name:"soundtrack",weight:.2},{name:"story",weight:1.25}]}};(0,C.t8)((0,C.iH)(F,`${e.state.databaseTopKey}`),t),e.dispatch("initializeDB")},async setDBValue(e,t){const s=I(t.value);(0,C.t8)((0,C.iH)(F,`${e.state.databaseTopKey}/${t.path}`),s).then((()=>{console.log("setDBValue success")})).catch((e=>{console.error(e),B.Tb(e)}))},addToRecentlyRatedTVShows(e,t){const s=e.state.settings.recentlyRatedTVShows||[];if(s.find((e=>e.id===t.id))){const e=s.findIndex((e=>e.id===t.id));s.splice(e,1)}s.length>2&&(s.length=2),s.unshift(t),e.dispatch("setDBValue",{path:"settings/recentlyRatedTVShows",value:s})},toggleCurrentLog(e){"movieLog"===this.state.currentLog?this.commit("setCurrentLog","tvLog"):this.commit("setCurrentLog","movieLog"),window.localStorage.setItem("movieLogCurrentLog",e.state.currentLog)}},modules:{}}),j=s(2483),U=s(3526),W=s(6220),q=s(8969),Y=s(2644);s(2166);const H={class:"home mx-auto"},N=(0,o._)("hr",null,null,-1),G=(0,o._)("hr",null,null,-1);function Z(e,t,s,a,i,r){const n=(0,o.up)("NewRatingSearch"),l=(0,o.up)("SearchDatabase"),c=(0,o.up)("QuickSearch");return(0,o.wg)(),(0,o.iD)("div",H,[(0,o.Wm)(n),N,(0,o.Wm)(l),G,(0,o.Wm)(c)])}const P=(0,o._)("input",{type:"hidden",name:"action",value:"entry"},null,-1),Q={class:"search-inputs input-group"},J={ref:"noResults",class:"invalid-feedback"},X=["disabled"],ee={key:0,class:"last-three-shows mt-4"},te=["onClick"],se=["src","alt"];function ae(e,t,s,i,r,n){const l=(0,o.up)("RatingChangeRibbon");return(0,o.wg)(),(0,o.iD)("form",{class:"new-rating-search mt-5 mb-4 mx-3",onSubmit:t[1]||(t[1]=(0,a.iM)(((...e)=>n.searchTMDB&&n.searchTMDB(...e)),["prevent"])),target:"_top",method:"GET"},[P,(0,o._)("div",Q,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),type:"text",class:"form-control",placeholder:"New Entry","aria-label":"New Entry","aria-describedby":"new-rating-button"},null,512),[[a.nr,r.value]]),(0,o._)("div",J,"No results found",512),(0,o._)("button",{class:"btn btn-primary",disabled:!r.value,type:"submit",id:"new-rating-button"},"Search",8,X)]),n.currentLogIsTVLog&&n.recentlyRatedTVShows.length?((0,o.wg)(),(0,o.iD)("div",ee,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.recentlyRatedTVShows,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t,class:"col-3",onClick:t=>n.reRate(e)},[(0,o._)("img",{src:`https://image.tmdb.org/t/p/original${e.poster_path}`,alt:`${e.name} poster`},null,8,se),(0,o.Wm)(l,{tvShow:e},null,8,["tvShow"])],8,te)))),128))])])):(0,o.kq)("",!0)],32)}var oe=s(5939);const ie=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-award-fill",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"}),(0,o._)("path",{d:"M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"})],-1),re={class:"number"},ne=(0,o._)("span",{class:"plus"},"+",-1);function le(e,t,s,a,i,r){return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["rating-change",{positive:r.rankChange>0,negative:r.rankChange<0,neutral:0==r.rankChange}])},[ie,(0,o._)("div",re,[ne,(0,o._)("span",null,(0,n.zw)(r.rankChange),1)])],2)}var ce={props:{tvShow:{type:Object,required:!0}},computed:{rankChange(){const e=this.$store.getters.allMediaSortedByRating,t=e.find((e=>e.tvShow.id===this.tvShow.id)),s=t?.ratings.tvShow.previousRanking?t.ratings.tvShow.previousRanking:e.length,a=e.findIndex((e=>e.tvShow.id===this.tvShow.id))+1;return s-a}}};const de=(0,h.Z)(ce,[["render",le]]);var ue=de,he={components:{RatingChangeRibbon:ue},data(){return{value:""}},computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog},movieOrTV(){return this.currentLogIsTVLog?"tv":"movie"},recentlyRatedTVShows(){return this.$store.state.settings.recentlyRatedTVShows||[]},tvLog(){return this.$store.state.tvLog}},methods:{async searchTMDB(){if(!this.value)return;const e=await oe.Z.get(`https://api.themoviedb.org/3/search/${this.movieOrTV}?api_key=7a5e8056956703ad202d3a3ddbcfc0e3&language=en-US&query=${this.value}`);e.data.results.length?this.newEntrySearch(e.data.results):this.showNoResultsMessage()},showNoResultsMessage(){this.$refs.noResults.classList.add("show-message"),setTimeout((()=>{this.$refs.noResults.classList.remove("show-message")}),3e3)},newEntrySearch(e){this.$store.commit("setNewEntrySearchResults",e),this.$router.push(`/pick-media/${this.value}`)},reRate(e){this.$store.commit("setTVShowToRate",e),this.$router.push("/rate-tv-show")}}};const ge=(0,h.Z)(he,[["render",ae]]);var pe=ge;const me={class:"my-5 mx-3"},ve={class:"search-inputs input-group mb-3"},we={key:0},ye={key:1};function be(e,t,s,i,r,n){return(0,o.wg)(),(0,o.iD)("form",me,[(0,o._)("div",ve,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),type:"text",class:"form-control",placeholder:"Search Database","aria-label":"Search Database","aria-describedby":"search-database-button"},null,512),[[a.nr,r.value]]),(0,o._)("button",{onClick:t[1]||(t[1]=(0,a.iM)(((...e)=>n.dBSearch&&n.dBSearch(...e)),["prevent"])),class:"btn btn-primary",type:"submit",id:"search-database-button"},[r.value?((0,o.wg)(),(0,o.iD)("span",we,"Search")):((0,o.wg)(),(0,o.iD)("span",ye,"Go"))])])])}var fe={data(){return{value:""}},methods:{dBSearch(){this.$store.commit("setDBSearchValue",this.value),this.$router.push("/db-search")}}};const _e=(0,h.Z)(fe,[["render",be]]);var ke=_e;const Te={class:"quick-search my-3 mx-3 mb-5"},Se=(0,o._)("label",{class:"mb-3 text-center col-12"},"Quick Search",-1),De={class:"p-0 d-flex justify-content-around flex-wrap"},Re={class:"col-2"},Ve={class:"col-2"},Le={class:"col-2"},$e={class:"col-2"},xe={class:"col-2"},Ce=(0,o._)("li",{class:"col-12"},null,-1),Me={class:"col-2"},Be=(0,o._)("span",null,"1970s",-1),Ae=[Be],Oe={class:"col-2"},ze=(0,o._)("span",null,"1980s",-1),Ie=[ze],Ee={class:"col-2"},Fe=(0,o._)("span",null,"1990s",-1),Ke=[Fe],je={class:"col-2"},Ue=(0,o._)("span",null,"2000s",-1),We=[Ue],qe={class:"col-2"},Ye=(0,o._)("span",null,"2010s",-1),He=[Ye],Ne=(0,o._)("li",{class:"col-12"},null,-1),Ge={class:"col-3"},Ze=(0,o._)("span",null,"Winners",-1),Pe=[Ze],Qe={class:"col-3"},Je=(0,o._)("span",null,"All",-1),Xe=[Je],et={class:"col-3"},tt=(0,o._)("span",null,"Recent",-1),st=[tt];function at(e,t,s,a,i,r){return(0,o.wg)(),(0,o.iD)("div",Te,[Se,(0,o._)("ul",De,[(0,o._)("li",Re,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[0]||(t[0]=e=>r.searchDatabase({searchTerm:`${r.currentYear}`,searchType:"year",sortValue:"rating",sortOrder:null}))},[(0,o._)("span",null,(0,n.zw)(r.currentYear),1)])]),(0,o._)("li",Ve,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[1]||(t[1]=e=>r.searchDatabase({searchTerm:""+(r.currentYear-1),searchType:"year",sortValue:"rating",sortOrder:null}))},[(0,o._)("span",null,(0,n.zw)(r.currentYear-1),1)])]),(0,o._)("li",Le,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[2]||(t[2]=e=>r.searchDatabase({searchTerm:""+(r.currentYear-2),searchType:"year",sortValue:"rating",sortOrder:null}))},[(0,o._)("span",null,(0,n.zw)(r.currentYear-2),1)])]),(0,o._)("li",$e,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[3]||(t[3]=e=>r.searchDatabase({searchTerm:""+(r.currentYear-3),searchType:"year",sortValue:"rating",sortOrder:null}))},[(0,o._)("span",null,(0,n.zw)(r.currentYear-3),1)])]),(0,o._)("li",xe,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[4]||(t[4]=e=>r.searchDatabase({searchTerm:""+(r.currentYear-4),searchType:"year",sortValue:"rating",sortOrder:null}))},[(0,o._)("span",null,(0,n.zw)(r.currentYear-4),1)])]),Ce,(0,o._)("li",Me,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[5]||(t[5]=e=>r.searchDatabase({searchTerm:"70s",searchType:"year",sortValue:"rating",sortOrder:null}))},Ae)]),(0,o._)("li",Oe,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[6]||(t[6]=e=>r.searchDatabase({searchTerm:"80s",searchType:"year",sortValue:"rating",sortOrder:null}))},Ie)]),(0,o._)("li",Ee,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[7]||(t[7]=e=>r.searchDatabase({searchTerm:"90s",searchType:"year",sortValue:"rating",sortOrder:null}))},Ke)]),(0,o._)("li",je,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[8]||(t[8]=e=>r.searchDatabase({searchTerm:"2000s",searchType:"year",sortValue:"rating",sortOrder:null}))},We)]),(0,o._)("li",qe,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[9]||(t[9]=e=>r.searchDatabase({searchTerm:"2010s",searchType:"year",sortValue:"rating",sortOrder:null}))},He)]),Ne,(0,o._)("li",Ge,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[10]||(t[10]=e=>r.searchDatabase({searchTerm:" ",searchType:"annual",sortValue:"release",sortOrder:null}))},Pe)]),(0,o._)("li",Qe,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[11]||(t[11]=e=>r.searchDatabase({searchTerm:"",searchType:"title",sortValue:"rating",sortOrder:"ascending"}))},Xe)]),(0,o._)("li",et,[(0,o._)("button",{class:"shadow-lg btn btn-secondary col-12 d-flex justify-content-center",onClick:t[12]||(t[12]=e=>r.searchDatabase({searchTerm:"",searchType:"title",sortValue:"watched",sortOrder:"ascending"}))},st)])])])}var ot={computed:{currentYear(){return(new Date).getFullYear()},settings(){return this.$store.state.settings}},methods:{searchDatabase(e){e.searchTerm||this.$store.commit("setDBSearchValue",""),e.searchTerm&&this.$store.commit("setDBSearchValue",e.searchTerm),e.searchType&&this.$store.commit("setDBSearchType",e.searchType),e.sortValue&&this.$store.commit("setDBSortValue",e.sortValue),e.sortOrder&&this.$store.commit("setDBSortOrder",e.sortOrder),this.$router.push("/db-search")}}};const it=(0,h.Z)(ot,[["render",at]]);var rt=it,nt={components:{NewRatingSearch:pe,SearchDatabase:ke,QuickSearch:rt}};const lt=(0,h.Z)(nt,[["render",Z]]);var ct=lt;const dt={class:"login"},ut=(0,o._)("h1",{class:"col-12 text-center"},"Welcome to Movie Log",-1),ht=(0,o._)("h2",{class:"col-12 text-center fs-6 mb-5"},"Please sign in with Google",-1);function gt(e,t,s,a,i,r){const n=(0,o.up)("GoogleLogin");return(0,o.wg)(),(0,o.iD)("div",dt,[ut,ht,(0,o.Wm)(n,{callback:r.login,prompt:"","auto-login":""},null,8,["callback"])])}var pt={methods:{async login(e){await this.$store.dispatch("login",e),this.$router.push("/")}}};const mt=(0,h.Z)(pt,[["render",gt]]);var vt=mt;const wt={class:"db-search-results p-3 pt-5 mx-auto"},yt={class:"search-bar mx-auto"},bt={class:"input-group mb-1 col-12 md-col-6"},ft=["placeholder"],_t={id:"datalistOptions"},kt=["value"],Tt=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x-circle",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),(0,o._)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1),St=[Tt],Dt={class:"search-types d-flex flex-nowrap mb-3 col-12 md-col-6"},Rt={class:"types d-flex align-items-center flex-wrap p-1"},Vt={key:0},Lt={key:1},$t={key:0},xt={key:1},Ct={class:"input-group mb-3 col-12 md-col-6"},Mt=(0,o._)("option",{value:"rating",selected:""},"Rating",-1),Bt=(0,o._)("option",{value:"watched"},"Watch Date",-1),At=(0,o._)("option",{value:"release"},"Release Date",-1),Ot=(0,o._)("option",{value:"title"},"Title",-1),zt=[Mt,Bt,At,Ot],It={key:0,class:"descending"},Et=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-sort-down-alt",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M3.5 3.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 12.293V3.5zm4 .5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1h-1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1h-3zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1h-5zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5z"})],-1),Ft=[Et],Kt={key:1,class:"ascending"},jt=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-sort-up-alt",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M3.5 13.5a.5.5 0 0 1-1 0V4.707L1.354 5.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 4.707V13.5zm4-9.5a.5.5 0 0 1 0-1h1a.5.5 0 0 1 0 1h-1zm0 3a.5.5 0 0 1 0-1h3a.5.5 0 0 1 0 1h-3zm0 3a.5.5 0 0 1 0-1h5a.5.5 0 0 1 0 1h-5zM7 12.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5z"})],-1),Ut=[jt],Wt=(0,o._)("hr",{class:"mt-4"},null,-1),qt={class:"details"},Yt={key:0,class:"fs-5 my-2 text-center"},Ht={key:1,class:"fs-5 my-2 text-center"},Nt={class:"m-0 d-flex justify-content-center align-items-center"},Gt={class:"charts-and-share col-12 my-3 d-flex justify-content-around align-items-center"},Zt=(0,o._)("button",{class:"btn btn-info col-5 collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#charts-accordion","aria-expanded":"false","aria-controls":"charts-accordion"}," Charts ",-1),Pt={key:0},Qt={key:1,class:"spinner-border text-light",role:"status"},Jt=(0,o._)("span",{class:"visually-hidden"},"Loading...",-1),Xt=[Jt],es={id:"charts-accordion",ref:"chartsAccordion",class:"accordion-collapse collapse","aria-labelledby":"charts"},ts={class:"accordion-body"},ss={class:"col-12 py-3 px-0 m-0 d-flex flex-wrap"};function as(e,t,s,i,r,l){const c=(0,o.up)("Charts"),d=(0,o.up)("DBSearchResult");return(0,o.wg)(),(0,o.iD)("div",wt,[(0,o._)("div",yt,[(0,o._)("div",bt,[(0,o.wy)((0,o._)("input",{class:(0,n.C_)(["form-control",{"has-content":r.value}]),type:"text",list:"datalistOptions",autocapitalize:"none",name:"search",id:"search",placeholder:`${r.searchType} search...`,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,10,ft),[[a.nr,r.value]]),(0,o._)("datalist",_t,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.datalistForSearchType,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e},null,8,kt)))),128))]),r.value?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"clear-button",onClick:t[1]||(t[1]=(0,a.iM)((e=>r.value=null),["prevent"]))},St)):(0,o.kq)("",!0)]),(0,o._)("div",Dt,[(0,o._)("div",Rt,[(0,o._)("span",{class:(0,n.C_)(["badge mx-1","title"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[2]||(t[2]=e=>r.searchType="title")},[l.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("span",Vt,"Name")):((0,o.wg)(),(0,o.iD)("span",Lt,"Title"))],2),(0,o._)("span",{class:(0,n.C_)(["badge mx-1","keyword"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[3]||(t[3]=e=>r.searchType="keyword")}," Keyword ",2),(0,o._)("span",{class:(0,n.C_)(["badge mx-1","genre"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[4]||(t[4]=e=>r.searchType="genre")}," Genre ",2),(0,o._)("span",{class:(0,n.C_)(["badge mx-1","year"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[5]||(t[5]=e=>r.searchType="year")}," Year ",2),(0,o._)("span",{class:(0,n.C_)(["badge mx-1","director"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[6]||(t[6]=e=>r.searchType="director")},[l.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("span",$t,"Created By")):((0,o.wg)(),(0,o.iD)("span",xt,"Director"))],2),(0,o._)("span",{class:(0,n.C_)(["badge mx-1","cast/crew"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[7]||(t[7]=e=>r.searchType="cast/crew")}," Cast/Crew ",2),(0,o._)("span",{class:(0,n.C_)(["badge mx-1","annual"===r.searchType?"text-bg-success":"text-bg-secondary"]),onClick:t[8]||(t[8]=e=>r.searchType="annual")}," Annual Best ",2)])]),(0,o._)("div",Ct,[(0,o.wy)((0,o._)("select",{class:"form-select",name:"sortValue",id:"sortValue","onUpdate:modelValue":t[9]||(t[9]=e=>r.sortValue=e)},zt,512),[[a.bM,r.sortValue]]),(0,o._)("label",{class:"input-group-text",onClick:t[10]||(t[10]=(...e)=>l.toggleSortOrder&&l.toggleSortOrder(...e))},["ascending"!==r.sortOrder?((0,o.wg)(),(0,o.iD)("div",It,Ft)):(0,o.kq)("",!0),"ascending"===r.sortOrder?((0,o.wg)(),(0,o.iD)("div",Kt,Ut)):(0,o.kq)("",!0)])])]),Wt,(0,o.wy)((0,o._)("div",qt,[l.filteredResults.length===l.allEntriesWithFlatKeywordsAdded.length?((0,o.wg)(),(0,o.iD)("p",Yt," You've rated "+(0,n.zw)(l.allEntriesWithFlatKeywordsAdded.length)+" "+(0,n.zw)(l.movieOrTVShow)+"s. ",1)):((0,o.wg)(),(0,o.iD)("p",Ht,(0,n.zw)(l.filteredResults.length)+" out of "+(0,n.zw)(l.allEntriesWithFlatKeywordsAdded.length)+" "+(0,n.zw)(l.movieOrTVShow)+"s match your search. ",1)),(0,o._)("p",Nt," They have an average rating of "+(0,n.zw)(l.averageRating(l.filteredResults)),1),(0,o._)("div",Gt,[Zt,(0,o._)("button",{class:"btn btn-secondary col-5",onClick:t[11]||(t[11]=(...e)=>l.shareResults&&l.shareResults(...e))},[r.sharing?((0,o.wg)(),(0,o.iD)("div",Qt,Xt)):((0,o.wg)(),(0,o.iD)("span",Pt," Share Results "))])])],512),[[a.F8,l.paginatedSortedResults.length]]),(0,o._)("div",es,[(0,o._)("div",ts,[(0,o.Wm)(c,{results:l.filteredResults,sortOrder:r.sortOrder,countedKeywords:l.countedKeywords,onUpdateSearchValue:l.updateSearchValue},null,8,["results","sortOrder","countedKeywords","onUpdateSearchValue"])])],512),(0,o._)("hr",{class:(0,n.C_)({"mt-3":l.currentLogIsTVLog})},null,2),(0,o._)("ul",ss,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.paginatedSortedResults,((e,t)=>((0,o.wg)(),(0,o.j4)(d,{key:t,result:e,index:t,onUpdateSearchValue:l.updateSearchValue},null,8,["result","index","onUpdateSearchValue"])))),128))]),l.sortedResults.length>r.numberOfResultsToShow?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-secondary mb-5 float-end",onClick:t[12]||(t[12]=(...e)=>l.addMoreResults&&l.addMoreResults(...e))}," More... ")):(0,o.kq)("",!0)])}const os={class:"charts"};function is(e,t,s,a,i,r){const n=(0,o.up)("KeywordCloud"),l=(0,o.up)("LineChart"),c=(0,o.up)("BarChart"),d=(0,o.up)("DoughnutChart"),u=(0,o.up)("ScatterChart"),h=(0,o.up)("RadarChart"),g=(0,o.up)("Streaks");return(0,o.wg)(),(0,o.iD)("div",os,[(0,o.Wm)(n,{results:s.results,countedKeywords:s.countedKeywords,onUpdateSearchValue:r.updateSearchValue},null,8,["results","countedKeywords","onUpdateSearchValue"]),s.results.length>9?((0,o.wg)(),(0,o.j4)(l,{key:0,class:"chart my-5",chartData:r.ratingsCountData,options:r.ratingsCountOptions},null,8,["chartData","options"])):(0,o.kq)("",!0),(0,o.Wm)(c,{class:"chart my-5",chartData:r.allRatingsData,options:r.allRatingsOptions},null,8,["chartData","options"]),s.results.length<10?((0,o.wg)(),(0,o.j4)(c,{key:1,class:"chart my-5",chartData:r.ratingsCountData,options:r.ratingsCountOptions},null,8,["chartData","options"])):(0,o.kq)("",!0),(0,o.Wm)(c,{class:"chart my-5",chartData:r.yearsData,options:r.yearsOptions},null,8,["chartData","options"]),(0,o.Wm)(c,{class:"chart my-5",chartData:r.highestRatingEachYearData,options:r.highestRatingEachYearOptions},null,8,["chartData","options"]),(0,o.Wm)(d,{class:"chart my-5",chartData:r.genreChartData,options:r.genreChartOptions},null,8,["chartData","options"]),(0,o.Wm)(u,{class:"chart my-5",chartData:r.lengthVsRatingData,options:r.lengthVsRatingOptions},null,8,["chartData","options"]),(0,o.Wm)(d,{class:"chart my-5",chartData:r.companyChartData,options:r.companyChartOptions},null,8,["chartData","options"]),s.results.length<10?((0,o.wg)(),(0,o.j4)(h,{key:2,class:"chart my-5",chartData:r.radarRatingsData,options:r.radarRatingsOptions},null,8,["chartData","options"])):(0,o.kq)("",!0),r.currentLogIsTVLog?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(g,{key:3,resultsWithRatings:r.resultsWithRatings,mostRecentRating:r.mostRecentRating},null,8,["resultsWithRatings","mostRecentRating"]))])}var rs=s(6610),ns=s(9646),ls=s(5709),cs=s.n(ls),ds=s(3919),us=s.n(ds),hs=s(1425),gs=s.n(hs),ps=s(7754),ms=s.n(ps);const vs={class:"streaks p-2 mb-4 border"},ws={class:"slider position-relative"},ys={for:"streak-threshold-input",class:"form-label"},bs={key:0,class:"longest-streak-days chart mt-2 mb-3 border border-2 rounded-1 shadow-sm p-3"},fs={class:"mb-4"},_s={key:1,class:"longest-streak-movies chart my-3 border border-2 rounded-1 shadow-sm p-3"},ks={class:"mb-4"},Ts={key:0},Ss={key:1};function Ds(e,t,s,i,r,l){return(0,o.wg)(),(0,o.iD)("div",vs,[(0,o._)("div",ws,[(0,o._)("label",ys,"Minimum score for streaks: "+(0,n.zw)(r.streakThreshold),1),(0,o.wy)((0,o._)("input",{type:"range",class:"form-range",min:"0",max:"10",step:"0.5",id:"streak-threshold-input","onUpdate:modelValue":t[0]||(t[0]=e=>r.streakThreshold=e)},null,512),[[a.nr,r.streakThreshold]])]),l.longestStreakByDays?((0,o.wg)(),(0,o.iD)("div",bs,[(0,o._)("h5",fs,"Consecutive days of "+(0,n.zw)(r.streakThreshold)+"+ ratings",1),(0,o._)("p",null,(0,n.zw)(l.longestStreakByDays.startDate.toLocaleDateString())+" - "+(0,n.zw)(l.longestStreakByDays.endDate.toLocaleDateString()),1),(0,o._)("p",null,"That's "+(0,n.zw)(l.longestStreakByDays.duration)+" days.",1),(0,o._)("p",null,'Every movie from "'+(0,n.zw)(l.longestStreakByDays.titles[0])+'" through "'+(0,n.zw)(l.longestStreakByDays.titles[l.longestStreakByDays.titles.length-1])+'".',1),(0,o._)("p",null,'And then "'+(0,n.zw)(l.longestStreakByDays.streakBreaker)+'" came along and blew it.',1)])):(0,o.kq)("",!0),l.longestStreakByMovies?((0,o.wg)(),(0,o.iD)("div",_s,[(0,o._)("h5",ks,"Consecutive movies at "+(0,n.zw)(r.streakThreshold)+" or more",1),(0,o._)("p",null,(0,n.zw)(l.longestStreakByMovies.titles.length)+" movies in a row.",1),(0,o._)("p",null,"From "+(0,n.zw)(l.longestStreakByMovies.startDate.toLocaleDateString())+" to "+(0,n.zw)(l.longestStreakByMovies.endDate.toLocaleDateString()),1),(0,o._)("p",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.longestStreakByMovies.titles,((e,t)=>((0,o.wg)(),(0,o.iD)("span",{key:t},[t===l.longestStreakByMovies.titles.length-1?((0,o.wg)(),(0,o.iD)("span",Ts,"and ")):(0,o.kq)("",!0),(0,o.Uk)('"'+(0,n.zw)(e)+'"',1),t!==l.longestStreakByMovies.titles.length-1?((0,o.wg)(),(0,o.iD)("span",Ss,", ")):(0,o.kq)("",!0)])))),128))]),(0,o._)("p",null,'And then "'+(0,n.zw)(l.longestStreakByMovies.streakBreaker)+'" came along and ruined everything.',1)])):(0,o.kq)("",!0)])}var Rs={props:{resultsWithRatings:{type:Array,required:!0},mostRecentRating:{type:Function,required:!0}},data(){return{streakThreshold:8}},computed:{streaks(){const e=[...this.resultsWithRatings].map((e=>({title:e.movie.title,releaseDate:new Date(e.movie.release_date),rating:parseFloat(this.mostRecentRating(e).rating)}))),t=gs()(e,(e=>e.releaseDate)),s=[];let a={};return t.forEach((e=>{!a.titles&&e.rating>this.streakThreshold?(a.titles=[e.title],a.startDate=e.releaseDate):e.rating>this.streakThreshold?(a.titles.push(e.title),a.endDate=e.releaseDate):a.endDate?(a.streakBreaker=e.title,a.endDate=e.releaseDate,a.duration=this.daysBetweenDates(a.startDate,a.endDate)-1,s.push({...a}),a={}):a={}})),s},longestStreakByDays(){return us()(this.streaks,(e=>e.duration))},longestStreakByMovies(){return us()(this.streaks,(e=>e.titles.length))}},methods:{daysBetweenDates(e,t){const s=864e5,a=e,o=t;return Math.round(Math.abs((a-o)/s))}}};const Vs=(0,h.Z)(Rs,[["render",Ds]]);var Ls=Vs;const $s={key:0,class:"keywords"},xs={class:"keywords-header d-flex align-items-center justify-content-center py-2"},Cs={key:0},Ms=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-columns-gap",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M6 1v3H1V1zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm14 12v3h-5v-3zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM6 8v7H1V8zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zm14-6v7h-5V1zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"})],-1),Bs=[Ms],As={key:1},Os=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-cloud",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"})],-1),zs=[Os],Is={class:"keyword-threshold d-flex align-items-center col-10"},Es={for:"customRange1",class:"form-label col-2 d-flex justify-content-end align-items-center px-2 my-0"},Fs=["max"],Ks={key:1,class:"d-flex flex-wrap"},js={class:"badge mx-1 text-bg-secondary"};function Us(e,t,s,i,r,l){const c=(0,o.up)("vueWordCloud");return l.keywordsForCloud.length>1?((0,o.wg)(),(0,o.iD)("div",$s,[(0,o._)("div",xs,[(0,o._)("button",{class:"keyword-style-toggle btn btn-sm btn-light",type:"button",onClick:t[0]||(t[0]=e=>r.showKeywordCloud=!r.showKeywordCloud)},[r.showKeywordCloud?((0,o.wg)(),(0,o.iD)("span",Cs,Bs)):((0,o.wg)(),(0,o.iD)("span",As,zs))]),(0,o._)("div",Is,[(0,o._)("label",Es,(0,n.zw)(r.threseholdRange)+"%",1),(0,o.wy)((0,o._)("input",{type:"range",class:"form-range col-10",style:{width:"83.33333333%"},id:"customRange1",min:"0",max:l.maxKeywordPercentage,"onUpdate:modelValue":t[1]||(t[1]=e=>r.threseholdRange=e)},null,8,Fs),[[a.nr,r.threseholdRange]])])]),r.showKeywordCloud?((0,o.wg)(),(0,o.j4)(c,{key:0,class:"word-cloud",words:l.keywordsForCloud,color:l.wordCLoudColors,rotation:l.wordCloudRotation,spacing:"1","font-size-ratio":"4","font-family":"Roboto Condensed",onClick:l.handleKeywordClick},null,8,["words","color","rotation","onClick"])):((0,o.wg)(),(0,o.iD)("div",Ks,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.keywordsForCloud,((e,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s},[(0,o._)("span",js,[(0,o._)("span",{onClick:t[2]||(t[2]=(...e)=>l.handleKeywordClick&&l.handleKeywordClick(...e))},(0,n.zw)(e[0]),1),(0,o._)("span",null,"Â ("+(0,n.zw)(Math.floor(e[1]/this.results.length*100))+"%)",1)])])))),128))]))])):(0,o.kq)("",!0)}var Ws=s(4871),qs={props:{results:{type:Array,required:!0},countedKeywords:{type:Object,required:!1,default:()=>{}}},components:{VueWordCloud:Ws.Z},data(){return{showKeywordCloud:!0,threseholdRange:3}},computed:{keywordsForCloud(){const e=Math.round(this.results.length*(this.threseholdRange/100)),t=Object.keys(this.countedKeywords).map((e=>[e,this.countedKeywords[e]])).filter((t=>t[1]>e)).sort(((e,t)=>t[1]-e[1]));return t},maxKeywordPercentage(){const e=Object.keys(this.countedKeywords).map((e=>[e,this.countedKeywords[e]])).sort(((e,t)=>t[1]-e[1]));return Math.floor(e[1][1]/this.results.length*100)}},methods:{handleKeywordClick(e){this.searchFor("keyword",e.target.innerText)},searchFor(e,t){this.updateSearchValue(e,t),window.scroll({top:top,behavior:"smooth"})},updateSearchValue(e,t){const s={searchType:e,value:t};this.$emit("updateSearchValue",s)},wordCLoudColors(e){const t=document.querySelector("body").classList.contains("bg-light")?"dark":"light";return[ms()({luminosity:t}),ms()({luminosity:t}),ms()({luminosity:t}),ms()({luminosity:t})]},wordCloudRotation(e){const t=Math.round(Math.random());return[0,3/4][t]}}};const Ys=(0,h.Z)(qs,[["render",Us]]);var Hs=Ys;ns.kL.register(...ns.zX);var Ns={props:{results:{type:Array,required:!0},sortOrder:{type:String,required:!0},countedKeywords:{type:Object,required:!1,default:()=>{}}},components:{BarChart:rs.vz,LineChart:rs.wW,DoughnutChart:rs.LD,ScatterChart:rs.GN,RadarChart:rs.HM,Streaks:Ls,KeywordCloud:Hs},data(){return{streakThreshold:5}},computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog},resultsWithRatings(){return this.results.filter((e=>this.mostRecentRating(e).rating))},allRatingsData(){const e=gs()(this.resultsWithRatings,(e=>this.mostRecentRating(e).rating)),t=e.map((e=>this.getMediaTitle(e))),s=e.map((e=>parseFloat(this.mostRecentRating(e).rating)));return{labels:t,datasets:[{data:s,backgroundColor:[ms()(),ms()(),ms()(),ms()()]}]}},allRatingsOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"All Ratings"}},scales:{x:{display:!1}}}},ratingsCountData(){const e=this.resultsWithRatings.map((e=>{const t=Math.round(2*parseFloat(this.mostRecentRating(e).rating))/2;return isNaN(t)?0:t})),t={1:0,1.5:0,2:0,2.5:0,3:0,3.5:0,4:0,4.5:0,5:0,5.5:0,6:0,6.5:0,7:0,7.5:0,8:0,8.5:0,9:0,9.5:0,10:0};e.forEach((e=>{t[e]?t[e]++:t[e]=1}));const s=Object.keys(t).map((e=>({label:e,value:t[e]}))).sort(((e,t)=>parseFloat(e.label)-parseFloat(t.label))),a=s.map((e=>e.value)),o=s.map((e=>e.label)),i=ms()();return{labels:o,datasets:[{data:a,backgroundColor:i,borderColor:i,tension:.5}]}},ratingsCountOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Ratings Distribution"}},backgroundColor:"rgba(100, 100, 0, 1)",scales:{x:{display:!0}}}},genreChartData(){const e=this.results.map((e=>this.topStructure(e).genres)),t={};e.forEach((e=>{e&&e.forEach((e=>{t[e.name]?t[e.name]++:t[e.name]=1}))}));const s=Object.keys(t).map((e=>({label:e,value:t[e]}))),a=s.map((e=>e.value)),o=s.map((e=>e.label));return{labels:o,datasets:[{data:a,backgroundColor:[ms()(),ms()(),ms()(),ms()(),ms()()]}]}},genreChartOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Genres"}},scales:{x:{display:!1}}}},lengthVsRatingData(){const e=this.resultsWithRatings.map((e=>{let t;return t=this.topStructure(e).runtime?this.topStructure(e).runtime:this.topStructure(e).episode_run_time?this.topStructure(e).episode_run_time[0]:0,{x:t,y:this.mostRecentRating(e).rating}})).filter((e=>e.x&&e.y));return{datasets:[{label:"(minutes, rating)",data:e,backgroundColor:ms()(),pointBorderColor:ms()()}]}},lengthVsRatingOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Runtime vs Rating"}},scales:{y:{title:{display:!0,text:"Rating"},type:"linear"},x:{title:{display:!0,text:"Minutes"},type:"linear",position:"bottom"}}}},companyChartData(){const e=this.results.map((e=>this.topStructure(e).production_companies)),t={};e.forEach((e=>{e&&e.forEach((e=>{t[e.name]?t[e.name]++:t[e.name]=1}))}));let s=0;Object.keys(t).forEach((e=>{s+=t[e]}));const a=Object.keys(t).map((e=>t[e]<.005*s?null:{label:e,value:t[e]})).filter((e=>e)),o=a.map((e=>e.value)),i=a.map((e=>e.label));return{labels:i,datasets:[{data:o,backgroundColor:[ms()(),ms()(),ms()(),ms()(),ms()()]}]}},companyChartOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Production Companies"},subtitle:{display:!0,text:"(with >0.5% representation)"}},scales:{x:{display:!1}}}},radarRatingsData(){const e=this.resultsWithRatings.map((e=>{const t=this.mostRecentRating(e),s=ms()({format:"rgba",alpha:.5});return{label:this.getMediaTitle(e),data:[t.direction,t.imagery,t.story,t.performance,t.soundtrack,t.impression,t.love,t.overall],fill:!0,backgroundColor:s,borderColor:ms()({hue:s}),pointBackgroundColor:ms()({hue:s}),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:ms()({hue:s})}}));return{labels:["direction","imagery","story","performance","soundtrack","impression","love","overall"],datasets:e}},radarRatingsOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Ratings"}},elements:{line:{borderWidth:3}}}},yearsData(){const e=this.resultsWithRatings.map((e=>({year:this.getYear(e),rating:this.mostRecentRating(e).rating}))),t={};e.forEach((e=>{t[e.year]?t[e.year].push(parseFloat(e.rating)):t[e.year]=[parseFloat(e.rating)]}));const s=[],a=[],o=[];return Object.keys(t).forEach((e=>{s.push(e),a.push(t[e].length),o.push(this.percentToColor(10*parseFloat(cs()(t[e]).toFixed())))})),{labels:s,datasets:[{data:a,backgroundColor:o}]}},yearsOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Years"},subtitle:{display:!0,text:"(Warmer color means higher average rating)"}}}},highestRatingEachYearData(){const e=this.resultsWithRatings.map((e=>({year:this.getYear(e),rating:this.mostRecentRating(e).rating,title:this.getMediaTitle(e)}))),t={};e.forEach((e=>{t[e.year]?t[e.year].push({rating:parseFloat(e.rating),title:e.title}):t[e.year]=[{rating:parseFloat(e.rating),title:e.title}]}));const s=[],a=[],o=[];return Object.keys(t).forEach((e=>{const i=us()(t[e],(e=>e.rating));s.push(`${i.title} (${e})`),a.push(i.rating),o.push(this.percentToColor(10*parseFloat(i.rating.toFixed())))})),{labels:s,datasets:[{data:a,backgroundColor:o}]}},highestRatingEachYearOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:this.currentLogIsTVLog?"Best Show Each Year":"Best Movie Each Year"}},scales:{x:{display:!1}}}}},methods:{getMediaTitle(e){return this.currentLogIsTVLog?e.tvShow.name:e.movie.title},topStructure(e){return this.currentLogIsTVLog?e.tvShow:e.movie},getYear(e){let t;return t=this.currentLogIsTVLog?e.tvShow.first_air_date:e.movie.release_date,new Date(t).getFullYear()},mostRecentRating(e){if(this.currentLogIsTVLog)return e.ratings.tvShow;{let t=e.ratings[0];return e.ratings.forEach((e=>{t.date?e.date&&e.date>t.date&&(t=e):t=e})),t}},percentToColor(e){let t=0,s=0;const a=0;e<50?(s=255,t=Math.round(5.1*e)):(t=255,s=Math.round(510-5.1*e));const o=65536*t+256*s+1*a;return"#"+("000000"+o.toString(16)).slice(-6)},updateSearchValue(e){this.$emit("updateSearchValue",e)}}};const Gs=(0,h.Z)(Ns,[["render",is]]);var Zs=Gs;const Ps={class:"number col-1 text-center"},Qs={class:"poster col-2"},Js={class:"details px-4 col-7"},Xs={class:"title mb-1"},ea={key:0,class:"fs-4"},ta={key:1,class:"fs-4"},sa={class:"etc m-0 d-flex flex-wrap"},aa={key:0,class:"col-12"},oa={key:1,class:"col-12"},ia={class:"col-12"},ra=["onClick"],na={key:0},la={class:"col-12"},ca={key:0},da=["onClick"],ua={key:0},ha={class:"rating col-2 d-flex justify-content-center flex-wrap"},ga={class:"col-12 m-0 fs-3 text-center"},pa=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-square-fill shadow-sm",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"})],-1),ma=[pa],va=["id"],wa=(0,o._)("hr",{class:"my-4"},null,-1),ya=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Full Rating",-1),ba={class:"rating-categories m-3"},fa=(0,o._)("hr",null,null,-1),_a=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Production Companies",-1),ka={class:"m-3"},Ta=(0,o._)("hr",null,null,-1),Sa=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Producer(s)",-1),Da={class:"m-3"},Ra=(0,o._)("hr",null,null,-1),Va=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Writer(s)",-1),La={key:0,class:"m-3"},$a={key:1,class:"m-3"},xa={key:2,class:"m-3"},Ca={key:3,class:"m-3"},Ma=(0,o._)("hr",null,null,-1),Ba=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Actors",-1),Aa={class:"actors"},Oa={class:"m-3"},za=(0,o._)("hr",null,null,-1),Ia=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Composer(s)",-1),Ea={class:"m-3"},Fa=(0,o._)("hr",null,null,-1),Ka=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Editor(s)",-1),ja={class:"m-3"},Ua=(0,o._)("hr",null,null,-1),Wa=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Cinematographer(s)",-1),qa={class:"m-3"},Ya={key:4},Ha={key:5,class:"mt-3 mb-2 fs-5"},Na={key:6,class:"m-3"},Ga={key:7},Za={key:8,class:"mt-3 mb-2 fs-5"},Pa={class:"awards m-3"},Qa={key:0},Ja={key:1},Xa=(0,o._)("hr",null,null,-1),eo={key:9,class:"mt-3 mb-2 fs-5"},to=(0,o._)("hr",null,null,-1),so=(0,o._)("h3",{class:"mt-3 mb-2 fs-5"},"Viewings",-1),ao={class:"d-flex flex-wrap justify-content-between m-3"},oo={class:"medium-and-date col-10"},io={key:0},ro={key:1},no={class:"col-2"},lo={class:"col-12 mx-4"},co={key:0,class:"ratings-tags"},uo={key:0};function ho(e,t,s,i,r,l){const c=(0,o.up)("EpisodeRatingsChart"),d=(0,o.Q2)("lazy");return(0,o.wg)(),(0,o.iD)("li",{class:"media-result py-3 px-1 my-3 d-flex flex-wrap align-items-center shadow-lg",onClick:t[4]||(t[4]=e=>l.showInfo(`Info-${this.topStructure(s.result).id}`))},[(0,o._)("label",Ps,(0,n.zw)(s.index+1),1),(0,o._)("div",Qs,[(0,o.wy)((0,o._)("img",{class:"col-12",onClick:t[0]||(t[0]=(0,a.iM)((e=>l.goToWikipedia(s.result)),["stop"]))},null,512),[[d,`https://image.tmdb.org/t/p/original${l.topStructure(s.result).poster_path}`]])]),(0,o._)("div",Js,[(0,o._)("p",Xs,[l.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("span",ea,(0,n.zw)(s.result.tvShow.name),1)):((0,o.wg)(),(0,o.iD)("span",ta,(0,n.zw)(s.result.movie.title),1)),(0,o._)("a",{class:"link mx-2",onClick:t[1]||(t[1]=(0,a.iM)((e=>l.searchFor("year",`${l.getYear(s.result)}`)),["stop"]))},"("+(0,n.zw)(l.getYear(s.result))+")",1)]),(0,o._)("p",sa,[l.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("span",aa,(0,n.zw)(l.tvNetwork(s.result)),1)):((0,o.wg)(),(0,o.iD)("span",oa,(0,n.zw)(l.prettifyRuntime(s.result)),1)),(0,o._)("span",ia,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.topStructure(s.result).genres,((e,t)=>((0,o.wg)(),(0,o.iD)("a",{key:t,class:"link",onClick:(0,a.iM)((t=>l.searchFor("genre",e.name)),["stop"])},[(0,o.Uk)((0,n.zw)(e.name),1),t!==l.topStructure(s.result).genres.length-1?((0,o.wg)(),(0,o.iD)("span",na,"Â ")):(0,o.kq)("",!0)],8,ra)))),128))]),(0,o._)("span",la,[l.currentLogIsTVLog&&s.result.tvShow.created_by?((0,o.wg)(),(0,o.iD)("span",ca,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.result.tvShow.created_by,((e,t)=>((0,o.wg)(),(0,o.iD)("a",{key:t,class:"link",onClick:(0,a.iM)((t=>l.searchFor("cast/crew",`'${e.name}'`)),["stop"])},[(0,o.Uk)((0,n.zw)(e.name),1),t!==s.result.tvShow.created_by.length-1?((0,o.wg)(),(0,o.iD)("span",ua,"Â ")):(0,o.kq)("",!0)],8,da)))),128))])):(0,o.kq)("",!0),l.currentLogIsTVLog?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("a",{key:1,class:"link",onClick:t[2]||(t[2]=(0,a.iM)((e=>l.searchFor("director",`'${l.getCrewMember(s.result.movie.crew,"Director","strict")}'`)),["stop"]))},(0,n.zw)(l.getCrewMember(s.result.movie.crew,"Director","strict")),1))])])]),(0,o._)("div",ha,[(0,o._)("p",ga,(0,n.zw)(parseFloat(l.mostRecentRating(s.result).rating).toFixed(2)),1)]),l.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:t[3]||(t[3]=(0,a.iM)((e=>l.rateTVShow(s.result.tvShow)),["stop"])),class:"rerate-button"},ma)):(0,o.kq)("",!0),(0,o._)("div",{id:`Info-${l.topStructure(s.result).id}`,class:"full-info ps-3 hidden"},[wa,ya,(0,o._)("p",ba,[(0,o._)("span",null,"Direction: "+(0,n.zw)(l.mostRecentRating(s.result).direction)+",Â ",1),(0,o._)("span",null,"Imagery: "+(0,n.zw)(l.mostRecentRating(s.result).imagery)+",Â ",1),(0,o._)("span",null,"Story: "+(0,n.zw)(l.mostRecentRating(s.result).story)+",Â ",1),(0,o._)("span",null,"Performance: "+(0,n.zw)(l.mostRecentRating(s.result).performance)+",Â ",1),(0,o._)("span",null,"Soundtrack: "+(0,n.zw)(l.mostRecentRating(s.result).soundtrack)+",Â ",1),(0,o._)("span",null,"Impression: "+(0,n.zw)(l.mostRecentRating(s.result).impression)+",Â ",1),(0,o._)("span",null,"Love: "+(0,n.zw)(l.mostRecentRating(s.result).love)+",Â ",1),(0,o._)("span",null,"Overall: "+(0,n.zw)(l.mostRecentRating(s.result).overall),1)]),fa,_a,(0,o._)("p",ka,(0,n.zw)(l.turnArrayIntoList(l.topStructure(s.result).production_companies,"name")),1),Ta,Sa,(0,o._)("p",Da,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Producer")),1),Ra,Va,l.getCrewMember(l.topStructure(s.result).crew,"Writer")?((0,o.wg)(),(0,o.iD)("p",La,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Writer"))+" (Writer)",1)):(0,o.kq)("",!0),l.getCrewMember(l.topStructure(s.result).crew,"Screenplay")?((0,o.wg)(),(0,o.iD)("p",$a,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Screenplay"))+" (Screenplay)",1)):(0,o.kq)("",!0),l.getCrewMember(l.topStructure(s.result).crew,"Story")?((0,o.wg)(),(0,o.iD)("p",xa,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Story"))+" (Story)",1)):(0,o.kq)("",!0),l.getCrewMember(l.topStructure(s.result).crew,"Novel")?((0,o.wg)(),(0,o.iD)("p",Ca,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Novel"))+" (Novel)",1)):(0,o.kq)("",!0),Ma,Ba,(0,o._)("div",Aa,[(0,o._)("p",Oa,(0,n.zw)(l.turnArrayIntoList(l.topStructure(s.result).cast,"name")),1)]),za,Ia,(0,o._)("p",Ea,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Composer")),1),Fa,Ka,(0,o._)("p",ja,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Editor","strict")),1),Ua,Wa,(0,o._)("p",qa,(0,n.zw)(l.getCrewMember(l.topStructure(s.result).crew,"Photo")),1),l.turnArrayIntoList(l.topStructure(s.result).tags,"title")?((0,o.wg)(),(0,o.iD)("hr",Ya)):(0,o.kq)("",!0),l.turnArrayIntoList(l.topStructure(s.result).tags,"title")?((0,o.wg)(),(0,o.iD)("h3",Ha,"Tags")):(0,o.kq)("",!0),l.turnArrayIntoList(l.topStructure(s.result).tags,"title")?((0,o.wg)(),(0,o.iD)("p",Na,(0,n.zw)(l.turnArrayIntoList(l.topStructure(s.result).tags,"title")),1)):(0,o.kq)("",!0),l.turnArrayIntoList(s.result.awards?.oscarWins).length||l.turnArrayIntoList(s.result.awards?.oscarNoms).length?((0,o.wg)(),(0,o.iD)("hr",Ga)):(0,o.kq)("",!0),l.turnArrayIntoList(s.result.awards?.oscarWins).length||l.turnArrayIntoList(s.result.awards?.oscarNoms).length?((0,o.wg)(),(0,o.iD)("h3",Za,"Academy Awards")):(0,o.kq)("",!0),(0,o._)("div",Pa,[l.turnArrayIntoList(s.result.awards?.oscarWins).length?((0,o.wg)(),(0,o.iD)("p",Qa,"Won: "+(0,n.zw)(l.turnArrayIntoList(s.result.awards?.oscarWins)),1)):(0,o.kq)("",!0),l.turnArrayIntoList(s.result.awards?.oscarNoms).length?((0,o.wg)(),(0,o.iD)("p",Ja,"Nominated: "+(0,n.zw)(l.turnArrayIntoList(s.result.awards?.oscarNoms)),1)):(0,o.kq)("",!0)]),Xa,l.currentLogIsTVLog?((0,o.wg)(),(0,o.iD)("h3",eo,"Ratings Chart")):(0,o.kq)("",!0),l.currentLogIsTVLog&&r.openEpisodes.includes(`Info-${this.topStructure(s.result).id}`)?((0,o.wg)(),(0,o.j4)(c,{key:10,tvShow:s.result},null,8,["tvShow"])):(0,o.kq)("",!0),to,so,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.result.ratings,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"viewing-wrapper"},[(0,o._)("p",ao,[(0,o._)("span",oo,[(0,o._)("span",null,(0,n.zw)(e.medium),1),e.medium&&e.date?((0,o.wg)(),(0,o.iD)("span",io,"Â onÂ ")):e.date?((0,o.wg)(),(0,o.iD)("span",ro,"Â On")):(0,o.kq)("",!0),(0,o._)("span",null,(0,n.zw)(l.formattedDate(e.date)),1)]),(0,o._)("span",no,[(0,o._)("span",null,(0,n.zw)(e.rating),1)]),(0,o._)("span",lo,[e.tags?((0,o.wg)(),(0,o.iD)("span",co,(0,n.zw)(l.turnArrayIntoList(e.tags,"title")),1)):(0,o.kq)("",!0)])]),t!==s.result.ratings.length-1?((0,o.wg)(),(0,o.iD)("hr",uo)):(0,o.kq)("",!0)])))),128))],8,va)])}var go=s(3298),po=s.n(go),mo=s(1542),vo=s.n(mo);function wo(e,t,s,a,i,r){const n=(0,o.up)("LineChart");return(0,o.wg)(),(0,o.j4)(n,{class:"chart my-5",chartData:r.episodeRatingsData,options:r.episodeRatingsOptions},null,8,["chartData","options"])}ns.kL.register(...ns.zX);var yo={props:{tvShow:{type:Object,required:!0}},data(){return{loading:!0,seasonsAndEpisodes:[]}},components:{LineChart:rs.wW},async mounted(){this.seasonsAndEpisodes=await this.getSeasonsAndEpisodes(),this.loading=!1},computed:{ratings(){return this.tvShow.ratings.episodes},labels(){const e=[];return this.seasonsAndEpisodes.forEach((t=>{if(0!==t.seasonNumber)for(let s=1;s<=t.episodeCount;s++)e.push(`${t.seasonNumber}x${s}`)})),e},data(){const e=[];return this.labels.forEach((t=>{const s=this.ratings.find((e=>{const s=`${e.episode.season_number}x${e.episode.episode_number}`;return t===s}));s?e.push(parseFloat(s.rating)):e.push(0)})),e},episodeRatingsData(){const e=ms()();return{labels:this.labels,datasets:[{data:this.data,backgroundColor:e,borderColor:e,tension:0,radius:0,fill:"origin"}]}},episodeRatingsOptions(){return{plugins:{legend:{display:!1},title:{display:!0,text:"Ratings Distribution"}},backgroundColor:"rgba(100, 100, 0, 1)",scales:{x:{display:!0}}}}},methods:{async getSeasonsAndEpisodes(){const e=await oe.Z.get(`https://api.themoviedb.org/3/tv/${this.tvShow.tvShow.id}?api_key=7a5e8056956703ad202d3a3ddbcfc0e3&language=en-US`);return e.data.seasons.map((e=>({seasonName:e.name,seasonId:e.id,seasonNumber:e.season_number,episodeCount:e.episode_count})))}}};const bo=(0,h.Z)(yo,[["render",wo]]);var fo=bo,_o={props:{result:{type:Object,required:!0},index:{type:Number,required:!0}},data(){return{openEpisodes:[]}},components:{EpisodeRatingsChart:fo},computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog}},methods:{updateSearchValue(e,t){this.$emit("updateSearchValue",{searchType:e,value:t})},topStructure(e){return this.currentLogIsTVLog?e.tvShow:e.movie},showInfo(e){const t=document.getElementById(e);t&&(t.classList.contains("hidden")?(t.classList.remove("hidden"),t.classList.add("shown"),this.openEpisodes.push(e)):(t.classList.add("hidden"),t.classList.remove("shown"),this.openEpisodes=this.openEpisodes.filter((t=>t!==e))))},async goToWikipedia(e){let t;t=this.currentLogIsTVLog?e.tvShow.name:e.movie.title,window.open(await this.wikiLinkFor(t))},async wikiLinkFor(e){const t=await oe.Z.get(`https://en.wikipedia.org/w/api.php?action=query&origin=*&format=json&generator=search&gsrnamespace=0&gsrlimit=5&gsrsearch=%27${e}%27`),s=t.data.query.pages,a=Object.keys(s).map((e=>s[e])),o=vo()(a,(e=>e.index));return`https://en.wikipedia.org/w/index.php?curid=${o.pageid}`},searchFor(e,t){this.updateSearchValue(e,t),window.scroll({top:top,behavior:"smooth"})},getYear(e){let t;return t=this.currentLogIsTVLog?e.tvShow.first_air_date:e.movie.release_date,new Date(t).getFullYear()},tvNetwork(e){const t=!!e.tvShow.networks&&e.tvShow.networks[0].name;return t||""},prettifyRuntime(e){let t;return t=this.currentLogIsTVLog&&e.tvShow.episode_run_time?e.tvShow.episode_run_time[0]:this.currentLogIsTVLog?0:e.movie.runtime,`${Math.floor(t/60)}h ${t%60}m`},turnArrayIntoList(e,t){if(!e)return"";let s=[...e];return s[0][t]&&!t?"":(t&&s[0][t]&&(s=s.map((e=>e[t]))),s.length>1?s.join(", "):s[0])},getCrewMember(e,t,s){if(!e)return"";let a;a=s?e.filter((e=>e.job===t)):e.filter((e=>e.job.includes(t)));const o=a.map((e=>e.name));return o.length?o.length>1?o.join(", "):o[0]:""},mostRecentRating(e){if(this.currentLogIsTVLog)return e.ratings.tvShow;{let t=e.ratings[0];return e.ratings.forEach((e=>{const s=e.date?new Date(e.date).getTime():0,a=t.date?new Date(t.date).getTime():0;t.date?s&&s>a&&(t=e):t=e})),t}},getOrdinal(e){return po().toOrdinal(e)},rateTVShow(e){this.$store.commit("setTVShowToRate",e),window.scroll({top:top,behavior:"smooth"}),this.$router.push("/rate-tv-show")},formattedDate(e){return new Date(e).toLocaleDateString()}}};const ko=(0,h.Z)(_o,[["render",ho]]);var To=ko,So={components:{Charts:Zs,DBSearchResult:To},data(){return{popperInstance:null,sortOrder:"ascending",sortValue:null,value:"",numberOfResultsToShow:50,sharing:!1,searchType:"title"}},watch:{DBSearchValue(e){(e||""===e)&&(this.value=e)},DBSearchType(e){e&&(this.searchType=e)},DBSortValue(e){e&&(this.sortValue=e)},DBSortOrder(e){e&&(this.sortOrder=e)},value(e){this.updateUrl()}},mounted(){this.value=this.DBSearchValue,this.$route.query.search&&(this.value=decodeURIComponent(this.$route.query.search)),this.DBSearchType?this.searchType=this.DBSearchType:this.searchType="title",this.DBSortValue?this.sortValue=this.DBSortValue:this.sortValue="rating",this.DBSortOrder?this.sortOrder=this.DBSortOrder:this.sortOrder="ascending"},beforeRouteLeave(){this.sortOrder="ascending",this.sortValue=null,this.value="",this.$store.commit("setDBSearchValue",this.value),this.$store.commit("setDBSearchType",this.searchType),this.$store.commit("setDBSortValue",this.sortValue),this.$store.commit("setDBSortOrder",this.sortOrder)},computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog},movieOrTVShow(){return this.currentLogIsTVLog?"TV show":"movie"},DBSearchValue(){return this.$store.state.DBSearchValue},DBSearchType(){return this.$store.state.DBSearchType},DBSortValue(){return this.$store.state.DBSortValue},DBSortOrder(){return this.$store.state.DBSortOrder},allEntriesWithFlatKeywordsAdded(){return this.$store.getters.allMediaAsArray.map((e=>this.currentLogIsTVLog?{...e,tvShow:{...this.topStructure(e),flatKeywords:this.topStructure(e).keywords?this.topStructure(e).keywords.map((e=>e.name)):[]}}:{...e,movie:{...this.topStructure(e),flatKeywords:this.topStructure(e).keywords?this.topStructure(e).keywords.map((e=>e.name)):[]}}))},filteredResults(){return"annual"===this.searchType?(this.$store.commit("setDBSortValue","release"),this.bestMovieFromEachYear):this.value?"title"===this.searchType?(this.$store.commit("setDBSortValue",this.DBSortValue||"rating"),this.titleFilter):"keyword"===this.searchType?(this.$store.commit("setDBSortValue",this.DBSortValue||"rating"),this.keywordFilter):"genre"===this.searchType?(this.$store.commit("setDBSortValue",this.DBSortValue||"rating"),this.genreFilter):"year"===this.searchType?(this.$store.commit("setDBSortValue",this.DBSortValue||"release"),this.yearFilter):"director"===this.searchType?(this.$store.commit("setDBSortValue",this.DBSortValue||"rating"),this.directorFilter):"cast/crew"===this.searchType?(this.$store.commit("setDBSortValue",this.DBSortValue||"rating"),this.castCrewFilter):[]:(this.$store.commit("setDBSortValue",this.DBSortValue||"rating"),this.allEntriesWithFlatKeywordsAdded)},titleFilter(){return this.allEntriesWithFlatKeywordsAdded.filter((e=>this.currentLogIsTVLog?this.topStructure(e).name.toLowerCase().includes(this.value.toLowerCase()):this.topStructure(e).title.toLowerCase().includes(this.value.toLowerCase())))},keywordFilter(){return this.allEntriesWithFlatKeywordsAdded.filter((e=>this.topStructure(e).flatKeywords?.includes(this.value.toLowerCase())))},genreFilter(){return this.allEntriesWithFlatKeywordsAdded.filter((e=>this.topStructure(e).genres?.find((e=>e.name.toLowerCase()===this.value.toLowerCase()))))},yearFilter(){let e=[];if(2===this.value.length&&parseInt(this.value)<(new Date).getFullYear()-2e3)e=[`20${this.value}`];else if(2===this.value.length)e=[`19${this.value}`];else if(this.value.includes("-")&&this.value.includes(" ")){e=this.value.split(" ").join("").split("-");for(let t=parseInt(e[0])+1;t<parseInt(e[1]);t++)e.push(t.toString())}else if(this.value.includes("-")){e=this.value.split("-");for(let t=parseInt(e[0])+1;t<parseInt(e[1]);t++)e.push(t.toString())}else 5===this.value.length&&this.value.includes("s")?(e=this.value.split("s").filter((e=>e)),e.push(`${parseInt(e[0])+1}`),e.push(`${parseInt(e[0])+2}`),e.push(`${parseInt(e[0])+3}`),e.push(`${parseInt(e[0])+4}`),e.push(`${parseInt(e[0])+5}`),e.push(`${parseInt(e[0])+6}`),e.push(`${parseInt(e[0])+7}`),e.push(`${parseInt(e[0])+8}`),e.push(`${parseInt(e[0])+9}`)):3===this.value.length&&this.value.includes("s")?(e=this.value.split("s").filter((e=>e)),parseInt(this.value)<(new Date).getFullYear()-2e3?e[0]=`20${e[0]}`:e[0]=`19${e[0]}`,e.push(`${parseInt(e[0])+1}`),e.push(`${parseInt(e[0])+2}`),e.push(`${parseInt(e[0])+3}`),e.push(`${parseInt(e[0])+4}`),e.push(`${parseInt(e[0])+5}`),e.push(`${parseInt(e[0])+6}`),e.push(`${parseInt(e[0])+7}`),e.push(`${parseInt(e[0])+8}`),e.push(`${parseInt(e[0])+9}`)):e=[this.value];return this.allEntriesWithFlatKeywordsAdded.filter((t=>e.includes(`${this.getYear(t)}`)))},directorFilter(){return this.currentLogIsTVLog?this.allEntriesWithFlatKeywordsAdded.filter((e=>e.tvShow.created_by?.map((e=>e.name.toLowerCase())).join(" ").includes(this.value.toLowerCase()))):this.allEntriesWithFlatKeywordsAdded.filter((e=>e.movie.crew?.find((e=>"Director"===e.job)).name.toLowerCase()===this.value.toLowerCase()))},castCrewFilter(){return this.allEntriesWithFlatKeywordsAdded.filter((e=>{const t=this.topStructure(e).cast?.map(((e,t)=>e.name.toLowerCase()))||[],s=this.topStructure(e).crew?.map(((e,t)=>e.name.toLowerCase()))||[],a=[...t,...s];return a.includes(this.value.toLowerCase())}))},bestMovieFromEachYear(){const e={};return this.allEntriesWithFlatKeywordsAdded.forEach((t=>{let s;s=this.currentLogIsTVLog?new Date(t.tvShow.first_air_date).getFullYear():new Date(t.movie.release_date).getFullYear(),e[s]?this.mostRecentRating(t).rating>this.mostRecentRating(e[s]).rating&&(e[s]=t):e[s]=t})),Object.keys(e).map((t=>e[t]))},sortedResults(){return[...this.filteredResults].sort(this.sortResults)},sortedByRating(){const e=this.$store.getters.allMediaSortedByRating;return"ascending"===this.sortOrder?e:e.slice().reverse()},paginatedSortedResults(){return this.sortedResults.slice(0,this.numberOfResultsToShow)},datalistForSearchType(){return"title"===this.searchType?this.allTitles:"keyword"===this.searchType?this.allKeywords:"genre"===this.searchType?this.allGenres:"year"===this.searchType?this.allYears:"director"===this.searchType?this.allDirectors:"cast/crew"===this.searchType?this.allCastCrew:[]},allTitles(){return this.currentLogIsTVLog?this.sortedResults.map((e=>e.tvShow.name)):this.sortedResults.map((e=>e.movie.title))},allKeywords(){return Object.keys(this.countedKeywords).map((e=>this.titleCase(e)))},allGenres(){const e=[];return this.sortedResults.forEach((t=>{this.topStructure(t).genres.forEach((t=>{e.includes(t.name)||e.push(t.name)}))})),e},allYears(){const e=[];return this.sortedResults.forEach((t=>{const s=this.getYear(t);e.includes(s)||e.push(s)})),e},allDirectors(){const e=[];return this.sortedResults.forEach((t=>{let s;s=this.currentLogIsTVLog?t?.tvShow?.created_by?.[0].name:t?.movie?.crew?.find((e=>"Director"===e.job)).name,s&&!e.includes(s)&&e.push(s)})),e},allCastCrew(){const e=[];return this.sortedResults.forEach((t=>{const s=this.topStructure(t)?.cast?.map(((e,t)=>t<10&&e.name))||[],a=this.topStructure(t)?.crew?.map(((e,t)=>t<10&&e.name))||[],o=[...s,...a];o.forEach((t=>{e.includes(t)||e.push(t)}))})),e},countedKeywords(){const e={};return this.sortedResults.forEach((t=>{this.topStructure(t).flatKeywords&&this.topStructure(t).flatKeywords.forEach((t=>{e[t]?e[t]++:e[t]=1}))})),e}},methods:{updateSearchValue(e){this.searchType=e.searchType,this.value=e.value.replace(/'/g,""),this.$refs.chartsAccordion?.classList.remove("show")},toggleSortOrder(){"ascending"===this.sortOrder?this.sortOrder="descending":this.sortOrder="ascending"},sortResults(e,t){let s,a;if(this.sortValue&&"rating"!==this.sortValue)if("release"===this.sortValue)this.currentLogIsTVLog?(s=new Date(e.tvShow.first_air_date),a=new Date(t.tvShow.first_air_date)):(s=new Date(e.movie.release_date),a=new Date(t.movie.release_date));else if("title"===this.sortValue)this.currentLogIsTVLog?(s=e.tvShow.name,a=t.tvShow.name):(s=e.movie.title,a=t.movie.title);else if("watched"===this.sortValue){const o=this.mostRecentRating(e).date||"3/22/1982",i=this.mostRecentRating(t).date||"3/22/1982";s=new Date(o),a=new Date(i)}else s=0,a=0;else s=this.mostRecentRating(e).rating,a=this.mostRecentRating(t).rating;return s<a?"ascending"===this.sortOrder?1:-1:s>a?"ascending"===this.sortOrder?-1:1:0},averageRating(e){const t=e.filter((e=>this.mostRecentRating(e).rating)),s=t.map((e=>parseFloat(this.mostRecentRating(e).rating))),a=s.reduce(((e,t)=>e+t),0);return(a/s.length).toFixed(2)},getYear(e){let t;return t=this.currentLogIsTVLog?e.tvShow.first_air_date:e.movie.release_date,new Date(t).getFullYear()},mostRecentRating(e){if(this.currentLogIsTVLog)return e.ratings.tvShow;{let t=e.ratings[0];return e.ratings.forEach((e=>{const s=e.date?new Date(e.date).getTime():0,a=t.date?new Date(t.date).getTime():0;t.date?s&&s>a&&(t=e):t=e})),t}},togglePopper(){const e=this.$refs.popper;e.hasAttribute("data-show","")?e.removeAttribute("data-show",""):e.setAttribute("data-show",""),this.popperInstance.update()},onClickAway(e){const t=this.$refs.popperWrapper,s=this.$refs.popper;t.contains(e.target)||s.hasAttribute("data-show","")&&(s.removeAttribute("data-show",""),this.popperInstance.update())},addMoreResults(){this.numberOfResultsToShow=this.numberOfResultsToShow+50,this.$nextTick((()=>{window.scrollBy({top:500,behavior:"smooth"})}))},async shareResults(){this.sharing=!0;const e={results:this.sortedResults,sortOrder:this.sortOrder,sortValue:this.sortValue,value:this.value},t=`${(new Date).getTime()}-${crypto.randomUUID()}`,s={path:`sharedDBSearches/${t}`,value:e};this.$store.dispatch("setDBValue",s),this.sharing=!1,this.value="",this.$nextTick((()=>{this.$router.push(`/share/${this.$store.state.databaseTopKey}/${t}`)}))},updateUrl(){if(!this.$store.state.goHome){const e=this.value?{search:encodeURIComponent(this.value)}:void 0;this.$router.replace({query:e})}},topStructure(e){return this.currentLogIsTVLog?e.tvShow:e.movie},titleCase(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}}};const Do=(0,h.Z)(So,[["render",as]]);var Ro=Do;const Vo={class:"settings bg-secondary text-light"},Lo={class:"p-3"},$o={class:"p-1 border-white border"},xo={class:"m-0 text-center fs-5"},Co={class:"dev-mode mt-3 p-3 border border-white"},Mo={class:"form-check form-switch m-0 d-flex justify-content-center"},Bo=(0,o._)("label",{class:"form-check-label ml-3",for:"devMode"},"Dev Mode",-1),Ao={class:"tv-log-switch mt-3 p-3 border border-white"},Oo={key:0},zo={key:1},Io={class:"tags viewing-tags p-3 border border-white mt-3"},Eo=(0,o._)("p",{class:"col-12"},"Viewing Specific Tags",-1),Fo={class:"col-12"},Ko=["onClick"],jo=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-x-circle-fill text-light",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1),Uo=[jo],Wo={class:"new-tag col-6 mt-4"},qo={class:"input-group"},Yo={class:"tags movie-tags p-3 border border-white mt-3"},Ho=(0,o._)("p",{class:"col-12"},"Movie Specific Tags",-1),No={class:"col-12"},Go=["onClick"],Zo=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-x-circle-fill text-light",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1),Po=[Zo],Qo={class:"new-tag col-6 mt-4"},Jo={class:"input-group"},Xo={class:"weights col-12 p-3 border-white border mt-3"},ei={class:"table text-light"},ti=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Category"),(0,o._)("th",null,"Weight"),(0,o._)("th",null,"Share")])],-1),si={class:"d-flex align-items-center"},ai={class:"input-group"},oi=["value","onKeyup"],ii=["onClick"],ri=(0,o._)("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"},null,-1),ni=[ri],li=(0,o._)("td",null,"Total",-1),ci=(0,o._)("td",null,null,-1),di={class:"mt-3 p-3 border border-white"},ui=(0,o._)("label",{class:"form-label",for:"routeAfterRating"},"After rating where would you like to go?",-1),hi=(0,o._)("option",{value:"recentlyViewed"},"Recently viewed",-1),gi=(0,o._)("option",{value:"allRatings"},"All ratings",-1),pi=(0,o._)("option",{value:"home"},"Home screen",-1),mi=(0,o._)("option",{value:"sameYear"},"Ratings from the same year",-1),vi=[hi,gi,pi,mi];function wi(e,t,s,i,r,l){return(0,o.wg)(),(0,o.iD)("div",Vo,[(0,o._)("div",Lo,[(0,o._)("div",$o,[(0,o._)("p",xo,":: "+(0,n.zw)(e.$store.state.databaseTopKey)+" ::",1)]),(0,o._)("div",Co,[(0,o._)("div",Mo,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"devMode","onUpdate:modelValue":t[0]||(t[0]=e=>r.devMode=e)},null,512),[[a.e8,r.devMode]]),Bo])]),(0,o._)("div",Ao,[(0,o._)("button",{class:"btn btn-primary col-12",onClick:t[1]||(t[1]=(...e)=>l.toggleMovieTV&&l.toggleMovieTV(...e))},[(0,o.Uk)("Switch to "),"tvLog"===l.currentLog?((0,o.wg)(),(0,o.iD)("span",Oo,"Movie Log")):(0,o.kq)("",!0),"movieLog"===l.currentLog?((0,o.wg)(),(0,o.iD)("span",zo,"TV Log")):(0,o.kq)("",!0)])]),(0,o._)("div",Io,[Eo,(0,o._)("ul",Fo,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.viewingTags,((e,s)=>((0,o.wg)(),(0,o.iD)("li",{class:"tag mb-2 col-6 dflex align-items-center",key:s},[(0,o._)("span",{class:"badge col-12 rounded-pill text-bg-light",onClick:t[2]||(t[2]=e=>l.showRemoveButton(e))},[(0,o.Uk)((0,n.zw)(e.title)+" ",1),(0,o._)("span",{class:"remove-button",onClick:(0,a.iM)((e=>l.removeViewingTag(s)),["prevent"])},Uo,8,Ko)])])))),128))]),(0,o._)("div",Wo,[(0,o._)("div",qo,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"new tag","onUpdate:modelValue":t[3]||(t[3]=e=>r.newViewingTagTitle=e),onKeyup:t[4]||(t[4]=(0,a.D2)(((...e)=>l.addViewingTag&&l.addViewingTag(...e)),["enter"]))},null,544),[[a.nr,r.newViewingTagTitle]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[5]||(t[5]=(...e)=>l.addViewingTag&&l.addViewingTag(...e))}," add ")])])]),(0,o._)("div",Yo,[Ho,(0,o._)("ul",No,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.movieTags,((e,s)=>((0,o.wg)(),(0,o.iD)("li",{class:"tag mb-2 col-6 dflex align-items-center",key:s},[(0,o._)("span",{class:"badge col-12 rounded-pill text-bg-light",onClick:t[6]||(t[6]=e=>l.showRemoveButton(e))},[(0,o.Uk)((0,n.zw)(e.title)+" ",1),(0,o._)("span",{class:"remove-button",onClick:(0,a.iM)((e=>l.removeMovieTag(s)),["prevent"])},Po,8,Go)])])))),128))]),(0,o._)("div",Qo,[(0,o._)("div",Jo,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"new tag","onUpdate:modelValue":t[7]||(t[7]=e=>r.newMovieTagTitle=e),onKeyup:t[8]||(t[8]=(0,a.D2)(((...e)=>l.addMovieTag&&l.addMovieTag(...e)),["enter"]))},null,544),[[a.nr,r.newMovieTagTitle]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[9]||(t[9]=(...e)=>l.addMovieTag&&l.addMovieTag(...e))}," add ")])])]),(0,o._)("div",Xo,[(0,o._)("table",ei,[ti,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.weights,((e,s)=>((0,o.wg)(),(0,o.iD)("tr",{key:s},[(0,o._)("td",null,(0,n.zw)(e.name),1),(0,o._)("td",si,[(0,o._)("span",null,(0,n.zw)(e.weight),1),(0,o._)("div",ai,[(0,o._)("input",{type:"text",class:"form-control",value:e.weight,onKeyup:(0,a.D2)((e=>l.clickSave(s)),["enter"])},null,40,oi),(0,o._)("button",{ref_for:!0,ref:`save${s}`,class:"btn btn-dark",type:"button",onClick:t=>l.updateWeight(t,s,e)}," save ",8,ii)]),((0,o.wg)(),(0,o.iD)("svg",{onClick:t[10]||(t[10]=e=>l.toggleEdit(e)),xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},ni))]),(0,o._)("td",null,(0,n.zw)(l.calculateShare(e.weight))+"% ",1)])))),128)),(0,o._)("tr",null,[li,(0,o._)("td",null,[(0,o._)("span",null,(0,n.zw)(l.totalWeight),1)]),ci])])])]),(0,o._)("div",di,[ui,(0,o.wy)((0,o._)("select",{class:"form-select",name:"routeAfterRating",id:"routeAfterRating","onUpdate:modelValue":t[11]||(t[11]=e=>r.routeAfterRating=e)},vi,512),[[a.bM,r.routeAfterRating]])])])])}var yi={props:{showSettings:{type:Boolean,required:!1,default:!1}},async mounted(){this.devMode=JSON.parse(window.localStorage.getItem("devMode"));const e=this.$store.state.settings?.routeAfterRating?.value;this.routeAfterRating=e||"recentlyViewed"},data(){return{newViewingTagTitle:null,newMovieTagTitle:null,devMode:!1,routeAfterRating:""}},watch:{devMode(e){window.localStorage.setItem("devMode",e),this.devModeSwitched(e)},routeAfterRating(e){this.setRouteAfterRating(e)},settingsRouteAfterRating(e){this.routeAfterRating=e}},computed:{currentLog(){return this.$store.state.currentLog},settings(){return this.$store.state.settings},settingsRouteAfterRating(){return this.$store.state.settings?.routeAfterRating?.value},databaseTopKey(){return this.$store.state.databaseTopKey},viewingTags(){return this.settings&&this.settings.tags?this.settings.tags["viewing-tags"]:[]},movieTags(){return this.settings&&this.settings.tags?this.settings.tags["movie-tags"]:[]},weights(){return this.settings?this.settings.weights:[]},totalWeight(){if(!this.settings?.weights)return 0;const e=this.settings.weights.map((e=>"impression"===e.name?e.weight/2:e.weight));let t=0;return e.forEach((e=>{t+=e})),t.toPrecision(4)}},methods:{calculateShare(e){const t=e/this.totalWeight*100;return t.toPrecision(4)},async setRouteAfterRating(e){if(this.databaseTopKey){const t={path:"settings/routeAfterRating",value:{value:e}};this.$store.dispatch("setDBValue",t)}},async addViewingTag(){if(!this.settings.tags||!this.settings.tags["viewing-tags"])return;const e=Object.keys(this.settings.tags["viewing-tags"]).map((e=>this.settings.tags["viewing-tags"][e]));if(!e.find((e=>e.title===this.newViewingTagTitle))){const e=`${(new Date).getTime()}-${crypto.randomUUID()}`,t={path:`settings/tags/viewing-tags/${e}`,value:{title:this.newViewingTagTitle}};this.$store.dispatch("setDBValue",t)}this.newViewingTagTitle=null},async addMovieTag(){if(!this.settings.tags||!this.settings.tags["movie-tags"])return;const e=Object.keys(this.settings.tags["movie-tags"]).map((e=>this.settings.tags["movie-tags"][e]));if(!e.find((e=>e.title===this.newMovieTagTitle))){const e=`${(new Date).getTime()}-${crypto.randomUUID()}`,t={path:`settings/tags/movie-tags/${e}`,value:{title:this.newMovieTagTitle}};this.$store.dispatch("setDBValue",t)}this.newMovieTagTitle=null},showRemoveButton(e){const t=Array.from(this.$el.querySelectorAll(".show-remove-button")),s=t.filter((t=>t!==e.target));s.forEach((e=>e.classList.remove("show-remove-button"))),e.target.classList.toggle("show-remove-button")},async removeViewingTag(e){const t={path:`settings/tags/viewing-tags/${e}`,value:null};this.$store.dispatch("setDBValue",t)},async removeMovieTag(e){const t={path:`settings/tags/movie-tags/${e}`,value:null};this.$store.dispatch("setDBValue",t)},toggleEdit(e){this.calculateShare(),this.$el.querySelectorAll("td.editing").forEach((e=>e.classList.remove("editing"))),e.target.parentElement.classList.add("editing")},clickSave(e){this.$refs[`save${e}`][0].click()},async updateWeight(e,t,s){const a=e.target.previousElementSibling.value,o={index:t,weight:{...s,weight:parseFloat(a)}},i={path:`settings/weights/${o.index}`,value:o.weight};this.$store.dispatch("setDBValue",i),this.$el.querySelectorAll("td.editing").forEach((e=>e.classList.remove("editing")))},async devModeSwitched(e){this.$route.meta.requiresLogin&&(e?this.$store.commit("setDatabaseTopKey",this.$store.state.devModeTopKey):this.$store.state.googleLogin?this.$store.commit("setDatabaseTopKey",this.$store.state.googleLogin):(window.localStorage.removeItem("databaseTopKey"),this.$router.push("/login")),await this.$store.dispatch("initializeDB"))},toggleMovieTV(){this.$store.dispatch("toggleCurrentLog"),this.$router.push("/")}}};const bi=(0,h.Z)(yi,[["render",wi]]);var fi=bi,_i=s.p+"img/Image_not_available.570136ec.png";const ki={class:"pick-media mx-auto"},Ti={class:"p-0 d-flex justify-content-around flex-wrap"},Si=["onClick"],Di=["src"],Ri={key:1,class:"card-img-top not-found",src:_i,align:"center"},Vi=["title"],Li=(0,o._)("br",null,null,-1);function $i(e,t,s,a,i,r){return(0,o.wg)(),(0,o.iD)("div",ki,[(0,o._)("ul",Ti,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.searchResults,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"card shadow border",key:e.id,onClick:t=>r.rateMedia(e)},[e.poster_path?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"card-img-top",src:`https://image.tmdb.org/t/p/original${e.poster_path}`,align:"center"},null,8,Di)):((0,o.wg)(),(0,o.iD)("img",Ri)),(0,o._)("p",{class:"my-3 mx-1 card-text text-center",title:r.getTitle(e)},[(0,o.Uk)((0,n.zw)(r.truncate(r.getTitle(e)))+" ",1),Li,(0,o.Uk)(" "+(0,n.zw)(r.getReleaseDate(e)),1)],8,Vi)],8,Si)))),128))])])}var xi={computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog},searchResults(){return this.$store.state.newEntrySearchResults}},methods:{rateMedia(e){this.currentLogIsTVLog?(this.$store.commit("setTVShowToRate",e),this.$router.push("/rate-tv-show")):(this.$store.commit("setMovieToRate",e),this.$router.push("/rate-movie"))},getTitle(e){return this.currentLogIsTVLog?e.name:e.title},getReleaseDate(e){return this.currentLogIsTVLog?e.first_air_date:e.release_date},truncate(e){return e.length>15?`${e.substr(0,13)}...`:e}}};const Ci=(0,h.Z)(xi,[["render",$i]]);var Mi=Ci;const Bi={class:"rate-movie mx-auto"},Ai={class:"rate-movie-header"},Oi=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-caret-left-fill",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"})],-1),zi=(0,o._)("span",null," Home ",-1),Ii=[Oi,zi],Ei=["src"],Fi={class:"text-light col-12 m-0 px-3 py-2"},Ki={class:"p-4"},ji={class:"col-12 mb-4"},Ui=(0,o._)("label",{class:"form-label fs-4",for:"title"},"Title",-1),Wi={class:"year-medium-date col-12 my-4 d-flex justify-content-between"},qi={class:"year col-2"},Yi=(0,o._)("label",{class:"form-label fs-4",for:"year"},"Year",-1),Hi={class:"medium col-3"},Ni=(0,o._)("label",{class:"form-label fs-4",for:"medium"},"Medium",-1),Gi=(0,o.uE)('<option value=""></option><option value="Theater">Theater</option><option value="Bluray">Bluray</option><option value="4K">4K</option><option value="DVD">DVD</option><option value="Netflix">Netflix</option><option value="Netflix">Youtube</option><option value="Vudu">Vudu</option><option value="HBO">HBO</option><option value="Hulu">Hulu</option><option value="Amazon Prime">Amazon Prime</option><option value="Disney+">Disney+</option><option value="Paramount+">Paramount+</option><option value="Kanopy">Kanopy</option><option value="Criterion">Criterion</option><option value="Apple+">Apple+</option><option value="Peacock">Peacock</option><option value="Download">Download</option><option value="Other">Other</option>',19),Zi=[Gi],Pi={class:"date col-5"},Qi=(0,o._)("label",{class:"form-label fs-4",for:"date"},"Date",-1),Ji={class:"col-12 mt-4 mb-3 movie-tags collapsed",ref:"movieTagList"},Xi={class:"form-label"},er={key:0},tr=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-caret-right",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M6 12.796V3.204L11.481 8 6 12.796zm.659.753 5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753z"})],-1),sr={class:"movie-tags-content"},ar={class:"tag-list d-flex flex-wrap"},or=["checked","id","onClick"],ir=["for"],rr={class:"input-group"},nr=(0,o._)("hr",null,null,-1),lr={class:"col-12 my-5"},cr=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"direction"},"Direction",-1),dr=(0,o._)("p",{class:"fs-6 fst-italic"},"Rate the film's directing and editing.",-1),ur=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),hr=[ur],gr={class:"col-12 my-5"},pr=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"imagery"},"Imagery",-1),mr=(0,o._)("p",{class:"fs-6 fst-italic"}," Rate the film's cinematography, visual effects, production design,costume design, and/or animation. ",-1),vr=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),wr=[vr],yr={class:"col-12 my-5"},br=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"story"},"Story",-1),fr=(0,o._)("p",{class:"fs-6 fst-italic"}," Rate the film's story and screenplay. ",-1),_r=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),kr=[_r],Tr={class:"col-12 my-5"},Sr=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"performance"},"Performance",-1),Dr=(0,o._)("p",{class:"fs-6 fst-italic"}," Rate the performances in the film. In the case of documentaries, rate the interest of the subject matter. ",-1),Rr=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),Vr=[Rr],Lr={class:"col-12 my-5"},$r=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"soundtrack"},"Soundtrack",-1),xr=(0,o._)("p",{class:"fs-6 fst-italic"}," Rate the film's score, songs, and sound design. ",-1),Cr=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),Mr=[Cr],Br={class:"col-12 my-5"},Ar=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"impression"},"Impression",-1),Or=(0,o._)("p",{class:"fs-6 fst-italic"}," Give your sense of the film's longevity or impact. ",-1),zr=(0,o.uE)('<option value=""></option><option value="0"> 0 - None </option><option value="1"> 1 - Will be remembered </option><option value="2"> 2 - Will be referenced </option><option value="3"> 3 - Influenced me </option><option value="4"> 4 - Important to me </option><option value="5"> 5 - Central to my life </option>',7),Ir=[zr],Er={class:"col-12 my-5"},Fr=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"love"},"Love",-1),Kr=(0,o._)("p",{class:"fs-6 fst-italic"}," The intangible quality of a film that seems to speak to you specifically. ",-1),jr=(0,o.uE)('<option value=""></option><option value="0"> -5 - The worst ever </option><option value="1"> -4 - One of the worst ever </option><option value="2"> -3 - I hated it </option><option value="3"> -2 - I really didn&#39;t like it </option><option value="4"> -1 - I didn&#39;t like it </option><option value="5"> 0 - No love </option><option value="6"> 1 - I liked it </option><option value="7"> 2 - I really liked it </option><option value="8"> 3 - A genre favorite </option><option value="9"> 4 - An overall favorite </option><option value="10"> 5 - My favorite </option>',12),Ur=[jr],Wr={class:"col-12 my-5"},qr=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"overall"},"Overall",-1),Yr=(0,o._)("p",{class:"fs-6 fst-italic"}," Gut sense of the film's overall rating. ",-1),Hr=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),Nr=[Hr],Gr=(0,o._)("hr",null,null,-1),Zr={class:"rating col-12 my-3 d-flex justify-content-center align-items-center",id:"rating"},Pr=(0,o._)("span",{class:"mx-3 d-flex justify-content-center align-items-center"},"|",-1),Qr=(0,o._)("span",{class:"mx-3 d-flex justify-content-center align-items-center"},"|",-1),Jr=(0,o._)("hr",null,null,-1),Xr={class:"col-12 my-5 viewing-tags"},en=(0,o._)("label",{class:"form-label"},"Tags for this viewing",-1),tn={class:"tag-list d-flex flex-wrap"},sn=["id","onClick"],an=["for"],on={class:"input-group"},rn=(0,o._)("hr",null,null,-1),nn=["disabled"],ln={key:0},cn={key:1,class:"disabled-show spinner-border spinner-border-sm mx-2",role:"status","aria-hidden":"true"},dn={key:2,class:"disabled-show"},un=(0,o._)("hr",null,null,-1),hn={key:0,class:"previous-ratings my-3 mb-5 px-4 pt-3 pb-5"},gn=(0,o._)("label",{class:"fs-4"},"Previous Viewings",-1),pn={class:"accordion",id:"previous-ratings-accordion"},mn=["id"],vn=["data-bs-target","aria-controls"],wn={class:"col-12 d-flex"},yn={class:"col-7 m-0 text-center border-end"},bn={key:0},fn={key:1},_n={class:"col-5 m-0 text-center border-start"},kn=["id","aria-labelledby"],Tn={class:"accordion-body"},Sn={class:"table mb-0 col-12 table-striped-columns"},Dn=(0,o._)("thead",null,[(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"dir")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"img")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"stry")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"perf")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"sndtk")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"imp")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"love")]),(0,o._)("th",{class:"col-1"},[(0,o._)("span",null,"ovral")])],-1),Rn={class:"table-secondary"},Vn={class:"col-1"},Ln={class:"col-1"},$n={class:"col-1"},xn={class:"col-1"},Cn={class:"col-1"},Mn={class:"col-1"},Bn={class:"col-1"},An={class:"col-1"};function On(e,t,s,i,r,l){return(0,o.wg)(),(0,o.iD)("div",Bi,[(0,o._)("div",Ai,[(0,o._)("div",{class:"home-link",onClick:t[0]||(t[0]=(...e)=>l.returnHome&&l.returnHome(...e))},Ii),l.rateBannerUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"col-12",src:l.rateBannerUrl},null,8,Ei)):(0,o.kq)("",!0),(0,o._)("h1",Fi,"Rate "+(0,n.zw)(r.title),1)]),(0,o._)("div",Ki,[(0,o._)("div",ji,[Ui,(0,o.wy)((0,o._)("input",{class:"form-control",name:"title",type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>r.title=e)},null,512),[[a.nr,r.title]])]),(0,o._)("div",Wi,[(0,o._)("div",qi,[Yi,(0,o.wy)((0,o._)("input",{class:"form-control",name:"year",id:"year",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>r.year=e)},null,512),[[a.nr,r.year]])]),(0,o._)("div",Hi,[Ni,(0,o.wy)((0,o._)("select",{class:"form-select",name:"medium",id:"medium","onUpdate:modelValue":t[3]||(t[3]=e=>r.medium=e)},Zi,512),[[a.bM,r.medium]])]),(0,o._)("div",Pi,[Qi,(0,o.wy)((0,o._)("input",{class:"form-control",name:"date",id:"date",type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>r.date=e)},null,512),[[a.nr,r.date]])])]),(0,o._)("div",Ji,[(0,o._)("div",{class:"movie-tags-toggle d-flex justify-content-between align-items-center",onClick:t[5]||(t[5]=(...e)=>l.toggleMovieTagList&&l.toggleMovieTagList(...e))},[(0,o._)("label",Xi,[(0,o.Uk)("Tags for the movie itself "),l.selectedMovieTagNames.length?((0,o.wg)(),(0,o.iD)("span",er,"("+(0,n.zw)(l.selectedMovieTagNames.length)+")",1)):(0,o.kq)("",!0)]),tr]),(0,o._)("div",sr,[(0,o._)("div",ar,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.movieTags,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"form-check mx-2 mb-2"},[(0,o._)("input",{class:"form-check-input",checked:l.movieTagChecked(e),type:"checkbox",id:`tag-${t}`,onClick:t=>l.toggleMovieTag(e)},null,8,or),(0,o._)("label",{class:"form-check-label",for:`tag-${t}`},(0,n.zw)(e.title),9,ir)])))),128))]),(0,o._)("div",rr,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"new tag","onUpdate:modelValue":t[6]||(t[6]=e=>r.newMovieTagTitle=e),onKeyup:t[7]||(t[7]=(0,a.D2)((0,a.iM)((()=>{}),["prevent"]),["enter"]))},null,544),[[a.nr,r.newMovieTagTitle]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[8]||(t[8]=(0,a.iM)(((...e)=>l.addMovieTag&&l.addMovieTag(...e)),["prevent"]))}," add ")])])],512),nr,(0,o._)("div",lr,[cr,dr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"direction",id:"direction","onUpdate:modelValue":t[9]||(t[9]=e=>r.direction=e)},hr,512),[[a.bM,r.direction]])]),(0,o._)("div",gr,[pr,mr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"imagery",id:"imagery","onUpdate:modelValue":t[10]||(t[10]=e=>r.imagery=e)},wr,512),[[a.bM,r.imagery]])]),(0,o._)("div",yr,[br,fr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"story",id:"story","onUpdate:modelValue":t[11]||(t[11]=e=>r.story=e)},kr,512),[[a.bM,r.story]])]),(0,o._)("div",Tr,[Sr,Dr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"performance",id:"performance","onUpdate:modelValue":t[12]||(t[12]=e=>r.performance=e)},Vr,512),[[a.bM,r.performance]])]),(0,o._)("div",Lr,[$r,xr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"soundtrack",id:"soundtrack","onUpdate:modelValue":t[13]||(t[13]=e=>r.soundtrack=e)},Mr,512),[[a.bM,r.soundtrack]])]),(0,o._)("div",Br,[Ar,Or,(0,o.wy)((0,o._)("select",{class:"form-select",name:"impression",id:"impression","onUpdate:modelValue":t[14]||(t[14]=e=>r.impression=e)},Ir,512),[[a.bM,r.impression]])]),(0,o._)("div",Er,[Fr,Kr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"love",id:"love","onUpdate:modelValue":t[15]||(t[15]=e=>r.love=e)},Ur,512),[[a.bM,r.love]])]),(0,o._)("div",Wr,[qr,Yr,(0,o.wy)((0,o._)("select",{class:"form-select",name:"overall",id:"overall","onUpdate:modelValue":t[16]||(t[16]=e=>r.overall=e)},Nr,512),[[a.bM,r.overall]])]),Gr,(0,o._)("p",Zr,[(0,o.Uk)(" Rating: "+(0,n.zw)(l.rating)+" ",1),Pr,(0,o.Uk)(" #"+(0,n.zw)(l.indexIfSortedIntoArray(l.movieAsRatedOnPage,l.allMoviesRanked)+1)+"/"+(0,n.zw)(l.numberOfMoviesAfterRating)+" ",1),Qr,(0,o.Uk)(" #"+(0,n.zw)(l.indexIfSortedIntoArray(l.movieAsRatedOnPage,l.moviesRankedFromYear)+1)+" in "+(0,n.zw)(l.movieYear(l.movieToRate)),1)]),Jr,(0,o._)("div",Xr,[en,(0,o._)("div",tn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.viewingTags,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"form-check mx-2 mb-2"},[(0,o._)("input",{class:"form-check-input",type:"checkbox",id:`tag-${t}`,onClick:t=>l.toggleViewingTag(e)},null,8,sn),(0,o._)("label",{class:"form-check-label",for:`tag-${t}`},(0,n.zw)(e.title),9,an)])))),128))]),(0,o._)("div",on,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"new tag","onUpdate:modelValue":t[17]||(t[17]=e=>r.newViewingTagTitle=e),onKeyup:t[18]||(t[18]=(0,a.D2)((0,a.iM)((()=>{}),["prevent"]),["enter"]))},null,544),[[a.nr,r.newViewingTagTitle]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[19]||(t[19]=(0,a.iM)(((...e)=>l.addViewingTag&&l.addViewingTag(...e)),["prevent"]))}," add ")])]),rn,(0,o._)("button",{class:"submit-button btn btn-primary col-12 mt-5 mb-4",onClick:t[20]||(t[20]=(0,a.iM)(((...e)=>l.addRating&&l.addRating(...e)),["prevent"])),type:"submit",value:"Submit",disabled:r.loading},[r.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",ln,"Submit")),r.loading?((0,o.wg)(),(0,o.iD)("span",cn)):(0,o.kq)("",!0),r.loading?((0,o.wg)(),(0,o.iD)("span",dn,"Submiting...")):(0,o.kq)("",!0)],8,nn)]),un,l.previousEntry?.ratings?((0,o.wg)(),(0,o.iD)("div",hn,[gn,(0,o._)("div",pn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.previousEntry.ratings,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"accordion-item",key:t},[(0,o._)("h2",{class:"accordion-header",id:`heading-${t}`},[(0,o._)("button",{class:"accordion-button px-5",type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse-${t}`,"aria-expanded":"false","aria-controls":`collapse-${t}`},[(0,o._)("div",wn,[(0,o._)("p",yn,[e.date?((0,o.wg)(),(0,o.iD)("span",bn,(0,n.zw)(e.date),1)):((0,o.wg)(),(0,o.iD)("span",fn,"-"))]),(0,o._)("p",_n,(0,n.zw)(e.rating),1)])],8,vn)],8,mn),(0,o._)("div",{id:`collapse-${t}`,class:"accordion-collapse collapse","aria-labelledby":`heading-${t}`},[(0,o._)("div",Tn,[(0,o._)("table",Sn,[Dn,(0,o._)("tbody",null,[(0,o._)("tr",Rn,[(0,o._)("td",Vn,(0,n.zw)(e.direction),1),(0,o._)("td",Ln,(0,n.zw)(e.imagery),1),(0,o._)("td",$n,(0,n.zw)(e.story),1),(0,o._)("td",xn,(0,n.zw)(e.performance),1),(0,o._)("td",Cn,(0,n.zw)(e.soundtrack),1),(0,o._)("td",Mn,(0,n.zw)(e.impression),1),(0,o._)("td",Bn,(0,n.zw)(e.love),1),(0,o._)("td",An,(0,n.zw)(e.overall),1)])])])])],8,kn)])))),128))])])):(0,o.kq)("",!0)])}var zn=s(5322);const In=async e=>{const t="7a5e8056956703ad202d3a3ddbcfc0e3",s=e.id||e.tvShowId;let a,o,i;try{"tvLog"===K.state.currentLog?(a=await oe.Z.get(`https://api.themoviedb.org/3/tv/${s}?api_key=${t}`),o=await oe.Z.get(`https://api.themoviedb.org/3/tv/${s}/credits?api_key=${t}`),i=await oe.Z.get(`https://api.themoviedb.org/3/tv/${s}/keywords?api_key=${t}`)):(a=await oe.Z.get(`https://api.themoviedb.org/3/movie/${s}?api_key=${t}`),o=await oe.Z.get(`https://api.themoviedb.org/3/movie/${s}/credits?api_key=${t}`),i=await oe.Z.get(`https://api.themoviedb.org/3/movie/${s}/keywords?api_key=${t}`))}catch(r){return void console.log(r)}return{...a.data,...o.data,keywords:i.data.keywords||i.data.results}},En=async e=>{if(!e)return null;let t;try{t=await oe.Z.get(`https://fast-refuge-34363.herokuapp.com/www.imdb.com/title/${e}/awards`)}catch(c){return void console.log(c)}const s=zn.ZP.load(t.data),a=s("h3:contains('Oscar [Winner]')").parent().next().text(),o=s("h3:contains('Oscar [Nominee]')").parent().next().text(),i=s("h3:contains('BAFTA Film Award [Winner]')").parent().next().text(),r=s("h3:contains('BAFTA Film Award [Nominee]')").parent().next().text(),n=s("h3:contains('Golden Globe [Winner]')").parent().next().text(),l=s("h3:contains('Golden Globe [Nominee]')").parent().next().text();return{oscarWins:Fn(a),oscarNoms:Fn(o),BAFTAWins:Fn(i),BAFTANoms:Fn(r),GoldGlobeWins:Fn(n),GoldGlobeNoms:Fn(l)}},Fn=e=>e.replace(/ {2}/g,"").split("\n").filter((e=>e)),Kn=e=>{const t=Object.keys(K.state.tvLog),s=t.map((e=>({...K.state.tvLog[e],key:e}))),a=s.find((t=>t.tvShow.id===e));return!!a&&a.key},jn=e=>{const t=Object.keys(K.state.movieLog),s=t.map((e=>({...K.state.movieLog[e],key:e}))),a=s.find((t=>t.movie.id===e));return!!a&&a.key},Un=e=>{if(!e.episodes||0===e.episodes.length)return{};const t=Object.keys(e.episodes[0]),s=["date","episode","medium","season","tags","title","year","tvShowId"],a=t.filter((e=>!s.includes(e))),o=K.getters.allMediaSortedByRating.findIndex((t=>t.tvShow.id===e.episodes[0].tvShowId)),i={date:(new Date).getTime(),tvShowId:e.episodes[0].tvShowId,previousRanking:o+1};return a.forEach((t=>{const s=e.episodes.reduce(((e,s)=>e+parseFloat(s[t])),0),a=s/e.episodes.length;i[t]=parseFloat(a.toPrecision(2))})),i},Wn=async(e,t)=>{if(!e.episodes[0].tvShowId)return;const s=await In(e.episodes[0]);let a,o;s&&(a=s.crew.map((e=>({job:e.job,name:e.name}))),o=s.cast.map((e=>({name:e.name}))));const i={backdrop_path:s?s.backdrop_path:null,cast:s?o:[],crew:s?a:[],created_by:s?s.created_by:[],episode_run_time:s?s.episode_run_time:[],genres:s?s.genres:[],id:s?s.id:null,poster_path:s?s.poster_path:null,production_companies:s?s.production_companies:[],first_air_date:s?s.first_air_date:null,last_air_date:s?s.last_air_date:null,networks:s?s.networks:[],number_of_episodes:s?s.number_of_episodes:null,number_of_seasons:s?s.number_of_seasons:null,name:s?s.name:"",tags:t||[],keywords:s?s.keywords.results:[]},r={...e,tvShow:Un(e)},n={tvShow:i,ratings:r},l=i.name.replaceAll(/[-!$%@^&*()_+|~=`{}[\]:";'<>?,./]/g,"-"),c=Kn(e.episodes[0].tvShowId)||`${(new Date).getTime()}-${crypto.randomUUID()}-${l}`;return{path:`tvLog/${c}`,value:n}},qn=async(e,t)=>{if(!e[0].id)return;const s=await In(e[0]),a=await En(s.imdb_id);let o,i;s&&(o=s.crew.map((e=>({job:e.job,name:e.name}))),i=s.cast.map((e=>({name:e.name}))));const r={backdrop_path:s?s.backdrop_path:null,cast:s?i:[],crew:s?o:[],genres:s?s.genres:[],id:s?s.id:null,imdb_id:s?s.imdb_id:null,ownership:e[0].ownership||null,poster_path:s?s.poster_path:null,production_companies:s?s.production_companies:[],release_date:s?s.release_date:null,runtime:s?s.runtime:null,title:s?s.title:"",awards:a||null,tags:t||[],keywords:s?s.keywords:[]},n=e.map((e=>{const t={...e};return delete t.ownership,t})),l={movie:r,ratings:n},c=r.title.replaceAll(/[-!$%@^&*()_+|~=`{}[\]:";'<>?,./]/g,"-"),d=jn(e[0].id)||`${(new Date).getTime()}-${crypto.randomUUID()}-${c}`;return{path:`movieLog/${d}`,value:l}},Yn=async(e,t)=>{let s;return s="tvLog"===K.state.currentLog?await Wn(e,t):await qn(e,t),K.dispatch("setDBValue",s),s};var Hn=Yn,Nn={data(){return{date:(new Date).toISOString().substr(0,10),direction:null,id:null,imagery:null,impression:null,loading:!1,love:null,medium:"",newViewingTagTitle:null,newMovieTagTitle:null,overall:null,performance:null,soundtrack:null,story:null,selectedViewingTags:[],selectedMovieTags:[],title:null,year:null}},mounted(){this.$store.commit("setShowHeader",!1),this.title=this.movieToRate.title,this.year=new Date(this.movieToRate.release_date).getFullYear(),this.id=this.movieToRate.id,this.selectedMovieTags=this.previousEntry&&this.previousEntry.movie.tags||[]},beforeRouteLeave(){this.$store.commit("setShowHeader",!0)},computed:{database(){return this.$store.state.movieLog},movieToRate(){return this.$store.state.movieToRate},settings(){return this.$store.state.settings},rating(){const e=this.getRatingFor("direction")>=0?this.getRatingFor("direction"):5,t=this.getRatingFor("imagery")>=0?this.getRatingFor("imagery"):5,s=this.getRatingFor("story")>=0?this.getRatingFor("story"):5,a=this.getRatingFor("performance")>=0?this.getRatingFor("performance"):5,o=this.getRatingFor("soundtrack")>=0?this.getRatingFor("soundtrack"):5,i=this.getRatingFor("impression")>=0?this.getRatingFor("impression"):0,r=this.getRatingFor("love")>=0?this.getRatingFor("love"):5,n=this.getRatingFor("overall")>=0?this.getRatingFor("overall"):5,l=e+t+s+a+o+i+r+n;return parseFloat(l/10).toFixed(2)},movieAsRatedOnPage(){return{...this.movieToRate,ratings:[{rating:this.rating}]}},numberOfMoviesAfterRating(){return this.previousEntry?this.$store.getters.allMoviesAsArray.length:this.$store.getters.allMoviesAsArray.length+1},allMoviesRanked(){const e=[...this.$store.getters.allMoviesAsArray];return e.sort(this.sortByRating)},moviesRankedFromYear(){const e=this.$store.getters.allMoviesAsArray.filter((e=>this.movieYear(e.movie)===this.movieYear(this.movieToRate)));return e.sort(this.sortByRating)},previousEntry(){return this.$store.getters.allMoviesAsArray.find((e=>e.movie.id===this.id))},viewingTags(){return this.settings&&this.settings.tags?this.settings.tags["viewing-tags"]:[]},movieTags(){return this.settings&&this.settings.tags?this.settings.tags["movie-tags"]:[]},rateBannerUrl(){return!!this.movieToRate&&`https://image.tmdb.org/t/p/original${this.movieToRate.backdrop_path}`},databaseTopKey(){return this.$store.state.databaseTopKey},selectedViewingTagNames(){return this.selectedViewingTags.map((e=>e.title))},selectedMovieTagNames(){return this.selectedMovieTags.map((e=>e.title))}},methods:{movieYear(e){return new Date(e.release_date).getFullYear()},previouslyRated(e){const t=Object.keys(this.database).map((e=>this.database[e].movie.id));return t.includes(e)},mostRecentRating(e){let t=e.ratings[0];return e.ratings.forEach((e=>{e.date&&e.date>t.date&&(t=e)})),t},sortByRating(e,t){const s=this.mostRecentRating(e).rating,a=this.mostRecentRating(t).rating;return s<a?1:s>a?-1:0},getWeight(e){const t=this.settings?.weights?.find((t=>t.name===e));return t?t.weight:0},getScore(e){const t=e.toLowerCase(),s=this[t];return parseFloat(s)},getRatingFor(e){if(e&&this.getWeight(e)&&this.getScore(e))return this.getWeight(e)*this.getScore(e)},indexIfSortedIntoArray(e,t){const s=[...t];return s.push(e),s.sort(this.sortByRating),s.indexOf(e)},async addViewingTag(){if(!this.settings.tags||!this.settings.tags["viewing-tags"])return;const e=Object.keys(this.settings.tags["viewing-tags"]).map((e=>this.settings.tags["viewing-tags"][e]));if(!e.find((e=>e.title===this.newViewingTagTitle))){const e=`${(new Date).getTime()}-${crypto.randomUUID()}`,t={path:`settings/tags/viewing-tags/${e}`,value:{title:this.newViewingTagTitle}};this.$store.dispatch("setDBValue",t)}this.newViewingTagTitle=null},async addMovieTag(){if(!this.settings.tags||!this.settings.tags["movie-tags"])return;const e=Object.keys(this.settings.tags["movie-tags"]).map((e=>this.settings.tags["movie-tags"][e]));if(!e.find((e=>e.title===this.newMovieTagTitle))){const e=`${(new Date).getTime()}-${crypto.randomUUID()}`,t={path:`settings/tags/movie-tags/${e}`,value:{title:this.newMovieTagTitle}};this.$store.dispatch("setDBValue",t)}this.newMovieTagTitle=null},toggleViewingTag(e){this.viewingTagChecked(e)?this.selectedViewingTags.splice(this.selectedViewingTags.indexOf(e),1):this.selectedViewingTags.push(e)},toggleMovieTag(e){this.movieTagChecked(e)?this.selectedMovieTags.splice(this.selectedMovieTags.indexOf(e),1):this.selectedMovieTags.push(e)},async addRating(){this.loading=!0;let e=[];this.previousEntry?.ratings&&(e=[...this.previousEntry.ratings]);const t={date:this.date?this.date:(new Date).getTime(),direction:this.direction?this.direction:5,id:this.id,imagery:this.imagery?this.imagery:5,impression:this.impression?this.impression:0,love:this.love?this.love:5,medium:this.medium?this.medium:"Other",overall:this.overall?this.overall:5,performance:this.performance?this.performance:5,rating:this.rating,soundtrack:this.soundtrack?this.soundtrack:5,story:this.story?this.story:5,tags:this.selectedViewingTags,title:this.title,year:this.year};e.push(t),await Hn(e,this.selectedMovieTags);const s=this.settings?.routeAfterRating?.value;window.scroll({top:top,behavior:"smooth"}),this.$store.commit("setShowHeader",!0),"recentlyViewed"===s?(this.$store.commit("setDBSortValue","watched"),this.$router.push("/db-search")):"allRatings"===s?(this.$store.commit("setDBSortValue","rating"),this.$router.push("/db-search")):"sameYear"===s?(this.$store.commit("setDBSearchValue",`y:${t.year}`),this.$store.commit("setDBSortValue","rating"),this.$router.push("/db-search")):this.$router.push("/")},returnHome(){this.$store.commit("setShowHeader",!0),this.$router.push("/")},viewingTagChecked(e){return!!this.selectedViewingTagNames&&this.selectedViewingTagNames.includes(e.title)},movieTagChecked(e){return!!this.selectedMovieTagNames&&this.selectedMovieTagNames.includes(e.title)},toggleMovieTagList(){this.$refs.movieTagList.classList.toggle("collapsed")}}};const Gn=(0,h.Z)(Nn,[["render",On]]);var Zn=Gn;const Pn={class:"rate-tv-show mx-auto"},Qn={class:"rate-tv-show-header"},Jn=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-caret-left-fill",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"})],-1),Xn=(0,o._)("span",null," Home ",-1),el=[Jn,Xn],tl=["src"],sl={class:"text-light col-12 m-0 px-3 py-2"},al={class:"p-4"},ol={class:"col-12 mb-4"},il=(0,o._)("label",{class:"form-label fs-4",for:"title"},"Title",-1),rl={class:"season-and-episode d-flex justify-content-between"},nl={class:"season col-4 my-4"},ll=(0,o._)("label",{class:"form-label fs-4",for:"season"},"Season",-1),cl=(0,o._)("option",{value:"all_seasons"},"All Seasons",-1),dl=["value"],ul={class:"episode col-7 my-4"},hl=(0,o._)("label",{class:"form-label fs-4",for:"episode"},"Episode",-1),gl=(0,o._)("option",{value:"all_episodes"},"All Episodes",-1),pl=["value"],ml={class:"date col-12 mb-4"},vl=(0,o._)("label",{class:"form-label fs-4",for:"date"},"Watch Date",-1),wl={class:"col-12 mt-4 mb-3 media-tags collapsed",ref:"mediaTagList"},yl={class:"form-label"},bl={key:0},fl=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-caret-right",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M6 12.796V3.204L11.481 8 6 12.796zm.659.753 5.48-4.796a1 1 0 0 0 0-1.506L6.66 2.451C6.011 1.885 5 2.345 5 3.204v9.592a1 1 0 0 0 1.659.753z"})],-1),_l={class:"media-tags-content"},kl={class:"tag-list d-flex flex-wrap"},Tl=["checked","id","onClick"],Sl=["for"],Dl={class:"input-group"},Rl=(0,o._)("hr",null,null,-1),Vl={class:"col-12 my-5"},Ll=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"direction"},"Direction",-1),$l={class:"fs-6 fst-italic"},xl=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),Cl=[xl],Ml={class:"col-12 my-5"},Bl=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"imagery"},"Imagery",-1),Al={class:"fs-6 fst-italic"},Ol=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),zl=[Ol],Il={class:"col-12 my-5"},El=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"story"},"Story",-1),Fl={class:"fs-6 fst-italic"},Kl=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),jl=[Kl],Ul={class:"col-12 my-5"},Wl=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"performance"},"Performance",-1),ql={class:"fs-6 fst-italic"},Yl=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),Hl=[Yl],Nl={class:"col-12 my-5"},Gl=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"soundtrack"},"Soundtrack",-1),Zl={class:"fs-6 fst-italic"},Pl=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),Ql=[Pl],Jl={class:"col-12 my-5"},Xl=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"impression"},"Impression",-1),ec={class:"fs-6 fst-italic"},tc=(0,o.uE)('<option value=""></option><option value="0"> 0 - None </option><option value="1"> 1 - Will be remembered </option><option value="2"> 2 - Will be referenced </option><option value="3"> 3 - Influenced me </option><option value="4"> 4 - Important to me </option><option value="5"> 5 - Central to my life </option>',7),sc=[tc],ac={class:"col-12 my-5"},oc=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"love"},"Love",-1),ic={class:"fs-6 fst-italic"},rc=(0,o.uE)('<option value=""></option><option value="0"> -5 - The worst ever </option><option value="1"> -4 - One of the worst ever </option><option value="2"> -3 - I hated it </option><option value="3"> -2 - I really didn&#39;t like it </option><option value="4"> -1 - I didn&#39;t like it </option><option value="5"> 0 - No love </option><option value="6"> 1 - I liked it </option><option value="7"> 2 - I really liked it </option><option value="8"> 3 - A genre favorite </option><option value="9"> 4 - An overall favorite </option><option value="10"> 5 - My favorite </option>',12),nc=[rc],lc={class:"col-12 my-5"},cc=(0,o._)("label",{class:"form-label fs-4 mb-0",for:"overall"},"Overall",-1),dc={class:"fs-6 fst-italic"},uc=(0,o.uE)('<option value=""></option><option value="0"> 0 - Worst in class </option><option value="1"> 1 - Among the worst in class </option><option value="2"> 2 - Terrible </option><option value="3"> 3 - Really Bad </option><option value="4"> 4 - Bad </option><option value="5"> 5 - Average </option><option value="6"> 6 - Good </option><option value="7"> 7 - Great </option><option value="8"> 8 - Incredible </option><option value="9"> 9 - Among the best in class </option><option value="10"> 10 - Best in class </option>',12),hc=[uc],gc=(0,o._)("hr",null,null,-1),pc={class:"rating col-12 my-3 d-flex justify-content-center align-items-center",id:"rating"},mc=(0,o._)("span",{class:"mx-3 d-flex justify-content-center align-items-center"},"|",-1),vc=(0,o._)("span",{class:"mx-3 d-flex justify-content-center align-items-center"},"|",-1),wc=(0,o._)("hr",null,null,-1),yc={class:"col-12 my-5 viewing-tags"},bc=(0,o._)("label",{class:"form-label"},"Tags for this viewing",-1),fc={class:"tag-list d-flex flex-wrap"},_c=["id","onClick"],kc=["for"],Tc={class:"input-group"},Sc=(0,o._)("hr",null,null,-1),Dc=["disabled"],Rc={key:0},Vc={key:1,class:"disabled-show spinner-border spinner-border-sm mx-2",role:"status","aria-hidden":"true"},Lc={key:2,class:"disabled-show"};function $c(e,t,s,i,r,l){return(0,o.wg)(),(0,o.iD)("div",Pn,[(0,o._)("div",Qn,[(0,o._)("div",{class:"home-link",onClick:t[0]||(t[0]=(...e)=>l.returnHome&&l.returnHome(...e))},el),l.rateBannerUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"col-12",src:l.rateBannerUrl},null,8,tl)):(0,o.kq)("",!0),(0,o._)("h1",sl,"Rate "+(0,n.zw)(r.title),1)]),(0,o._)("div",al,[(0,o._)("div",ol,[il,(0,o.wy)((0,o._)("input",{class:"form-control",name:"title",type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>r.title=e)},null,512),[[a.nr,r.title]])]),(0,o._)("div",rl,[(0,o._)("div",nl,[ll,(0,o.wy)((0,o._)("select",{class:"form-select",name:"season",id:"season","onUpdate:modelValue":t[2]||(t[2]=e=>r.season=e),onChange:t[3]||(t[3]=(...e)=>l.selectSeason&&l.selectSeason(...e))},[cl,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.seasons,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e},(0,n.zw)(e.name),9,dl)))),128))],544),[[a.bM,r.season]])]),(0,o._)("div",ul,[hl,(0,o.wy)((0,o._)("select",{class:"form-select",name:"episode",id:"episode","onUpdate:modelValue":t[4]||(t[4]=e=>r.episode=e)},[gl,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.episodes,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e},(0,n.zw)(e.episode_number)+" - "+(0,n.zw)(e.name),9,pl)))),128))],512),[[a.bM,r.episode]])])]),(0,o._)("div",ml,[vl,(0,o.wy)((0,o._)("input",{class:"form-control",name:"date",id:"date",type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>r.date=e)},null,512),[[a.nr,r.date]])]),(0,o._)("div",wl,[(0,o._)("div",{class:"media-tags-toggle d-flex justify-content-between align-items-center",onClick:t[6]||(t[6]=(...e)=>l.toggleTVShowTagList&&l.toggleTVShowTagList(...e))},[(0,o._)("label",yl,[(0,o.Uk)("Tags for the show itself "),l.selectedTVShowTagNames.length?((0,o.wg)(),(0,o.iD)("span",bl,"("+(0,n.zw)(l.selectedTVShowTagNames.length)+")",1)):(0,o.kq)("",!0)]),fl]),(0,o._)("div",_l,[(0,o._)("div",kl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.mediaTags,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"form-check mx-2 mb-2"},[(0,o._)("input",{class:"form-check-input",checked:l.mediaTagChecked(e),type:"checkbox",id:`tag-${t}`,onClick:t=>l.toggleMediaTag(e)},null,8,Tl),(0,o._)("label",{class:"form-check-label",for:`tag-${t}`},(0,n.zw)(e.title),9,Sl)])))),128))]),(0,o._)("div",Dl,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"new tag","onUpdate:modelValue":t[7]||(t[7]=e=>r.newMediaTagTitle=e),onKeyup:t[8]||(t[8]=(0,a.D2)((0,a.iM)((()=>{}),["prevent"]),["enter"]))},null,544),[[a.nr,r.newMediaTagTitle]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[9]||(t[9]=(0,a.iM)(((...e)=>l.addMediaTag&&l.addMediaTag(...e)),["prevent"]))}," add ")])])],512),Rl,(0,o._)("div",Vl,[Ll,(0,o._)("p",$l,"Rate the "+(0,n.zw)(l.episodeSeasonOrShow)+"'s directing and editing.",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"direction",id:"direction","onUpdate:modelValue":t[10]||(t[10]=e=>r.direction=e)},Cl,512),[[a.bM,r.direction]])]),(0,o._)("div",Ml,[Bl,(0,o._)("p",Al," Rate the "+(0,n.zw)(l.episodeSeasonOrShow)+"'s cinematography, visual effects, production design,costume design, and/or animation. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"imagery",id:"imagery","onUpdate:modelValue":t[11]||(t[11]=e=>r.imagery=e)},zl,512),[[a.bM,r.imagery]])]),(0,o._)("div",Il,[El,(0,o._)("p",Fl," Rate the "+(0,n.zw)(l.episodeSeasonOrShow)+"'s story and screenplay. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"story",id:"story","onUpdate:modelValue":t[12]||(t[12]=e=>r.story=e)},jl,512),[[a.bM,r.story]])]),(0,o._)("div",Ul,[Wl,(0,o._)("p",ql," Rate the performances in the "+(0,n.zw)(l.episodeSeasonOrShow)+". In the case of documentaries, rate the interest of the subject matter. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"performance",id:"performance","onUpdate:modelValue":t[13]||(t[13]=e=>r.performance=e)},Hl,512),[[a.bM,r.performance]])]),(0,o._)("div",Nl,[Gl,(0,o._)("p",Zl," Rate the "+(0,n.zw)(l.episodeSeasonOrShow)+"'s score, songs, and sound design. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"soundtrack",id:"soundtrack","onUpdate:modelValue":t[14]||(t[14]=e=>r.soundtrack=e)},Ql,512),[[a.bM,r.soundtrack]])]),(0,o._)("div",Jl,[Xl,(0,o._)("p",ec," Give your sense of the "+(0,n.zw)(l.episodeSeasonOrShow)+"'s longevity or impact. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"impression",id:"impression","onUpdate:modelValue":t[15]||(t[15]=e=>r.impression=e)},sc,512),[[a.bM,r.impression]])]),(0,o._)("div",ac,[oc,(0,o._)("p",ic," The intangible quality of a "+(0,n.zw)(l.episodeSeasonOrShow)+" that seems to speak to you specifically. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"love",id:"love","onUpdate:modelValue":t[16]||(t[16]=e=>r.love=e)},nc,512),[[a.bM,r.love]])]),(0,o._)("div",lc,[cc,(0,o._)("p",dc," Gut sense of the "+(0,n.zw)(l.episodeSeasonOrShow)+"'s overall rating. ",1),(0,o.wy)((0,o._)("select",{class:"form-select",name:"overall",id:"overall","onUpdate:modelValue":t[17]||(t[17]=e=>r.overall=e)},hc,512),[[a.bM,r.overall]])]),gc,(0,o._)("p",pc,[(0,o.Uk)(" Rating: "+(0,n.zw)(l.rating)+" ",1),mc,(0,o.Uk)(" #"+(0,n.zw)(l.indexIfSortedIntoArray(l.tvShowAsRatedOnPage,l.allTVShowsRanked)+1)+"/"+(0,n.zw)(l.numberOfTVShowsAfterRating)+" ",1),vc,(0,o.Uk)(" #"+(0,n.zw)(l.indexIfSortedIntoArray(l.tvShowAsRatedOnPage,l.tvShowsRankedFromYear)+1)+" in "+(0,n.zw)(l.tvShowYear(this.tvShowToRate)),1)]),wc,(0,o._)("div",yc,[bc,(0,o._)("div",fc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.viewingTags,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"form-check mx-2 mb-2"},[(0,o._)("input",{class:"form-check-input",type:"checkbox",id:`tag-${t}`,onClick:t=>l.toggleViewingTag(e)},null,8,_c),(0,o._)("label",{class:"form-check-label",for:`tag-${t}`},(0,n.zw)(e.title),9,kc)])))),128))]),(0,o._)("div",Tc,[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",placeholder:"new tag","onUpdate:modelValue":t[18]||(t[18]=e=>r.newViewingTagTitle=e),onKeyup:t[19]||(t[19]=(0,a.D2)((0,a.iM)((()=>{}),["prevent"]),["enter"]))},null,544),[[a.nr,r.newViewingTagTitle]]),(0,o._)("button",{class:"btn btn-dark",type:"button",onClick:t[20]||(t[20]=(0,a.iM)(((...e)=>l.addViewingTag&&l.addViewingTag(...e)),["prevent"]))}," add ")])]),Sc,(0,o._)("button",{class:"submit-button btn btn-primary col-12 mt-5",onClick:t[21]||(t[21]=(0,a.iM)(((...e)=>l.addRating&&l.addRating(...e)),["prevent"])),type:"submit",value:"Submit",disabled:r.loading},[r.loading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",Rc,"Rate "+(0,n.zw)(l.episodeSeasonOrShow),1)),r.loading?((0,o.wg)(),(0,o.iD)("span",Vc)):(0,o.kq)("",!0),r.loading?((0,o.wg)(),(0,o.iD)("span",Lc,"Submiting...")):(0,o.kq)("",!0)],8,Dc)])])}var xc={data(){return{date:(new Date).toISOString().substr(0,10),direction:null,tvShowId:null,imagery:null,impression:null,loading:!1,love:null,medium:"",newViewingTagTitle:null,newMediaTagTitle:null,overall:null,performance:null,soundtrack:null,story:null,selectedViewingTags:[],selectedMediaTags:[],title:null,year:null,season:"all_seasons",seasons:[],episode:"all_episodes",episodes:[]}},async mounted(){this.$store.commit("setShowHeader",!1),this.title=this.tvShowToRate.name,this.year=new Date(this.tvShowToRate.first_air_date).getFullYear(),this.tvShowId=this.tvShowToRate.id;const e=await oe.Z.get(`https://api.themoviedb.org/3/tv/${this.tvShowId}?api_key=7a5e8056956703ad202d3a3ddbcfc0e3&language=en-US`);this.seasons=e.data.seasons,this.selectedMediaTags=this.previousEntry&&this.previousEntry.tvShow.tags||[]},beforeRouteLeave(){this.$store.commit("setShowHeader",!0)},computed:{currentLogIsTVLog(){return"tvLog"===this.$store.state.currentLog},database(){return this.$store.state.tvLog},tvShowToRate(){return this.$store.state.tvShowToRate},settings(){return this.$store.state.settings},rating(){const e=this.getRatingFor("direction")>=0?this.getRatingFor("direction"):5,t=this.getRatingFor("imagery")>=0?this.getRatingFor("imagery"):5,s=this.getRatingFor("story")>=0?this.getRatingFor("story"):5,a=this.getRatingFor("performance")>=0?this.getRatingFor("performance"):5,o=this.getRatingFor("soundtrack")>=0?this.getRatingFor("soundtrack"):5,i=this.getRatingFor("impression")>=0?this.getRatingFor("impression"):0,r=this.getRatingFor("love")>=0?this.getRatingFor("love"):5,n=this.getRatingFor("overall")>=0?this.getRatingFor("overall"):5,l=e+t+s+a+o+i+r+n;return parseFloat(l/10).toFixed(2)},tvShowAsRatedOnPage(){return{...this.tvShowToRate,ratings:[{rating:this.rating}]}},episodeSeasonOrShow(){return"all_seasons"===this.season?"show":"all_episodes"===this.episode?"season":"episode"},numberOfTVShowsAfterRating(){return this.previousEntry?this.$store.getters.allTVShowsAsArray.length:this.$store.getters.allTVShowsAsArray.length+1},allTVShowsRanked(){const e=[...this.$store.getters.allTVShowsAsArray];return e.sort(this.sortByRating)},tvShowsRankedFromYear(){const e=this.$store.getters.allTVShowsAsArray.filter((e=>this.tvShowYear(e.tvShow)===this.tvShowYear(this.tvShowToRate)));return e.sort(this.sortByRating)},previousEntry(){return this.$store.getters.allTVShowsAsArray.find((e=>e.tvShow.id===this.tvShowId))},viewingTags(){return this.settings&&this.settings.tags?this.settings.tags["viewing-tags"]:[]},mediaTags(){return this.settings&&this.settings.tags?this.settings.tags["media-tags"]:[]},rateBannerUrl(){return!!this.tvShowToRate&&`https://image.tmdb.org/t/p/original${this.tvShowToRate.backdrop_path}`},databaseTopKey(){return this.$store.state.databaseTopKey},selectedViewingTagNames(){return this.selectedViewingTags.map((e=>e.title))},selectedTVShowTagNames(){return this.selectedMediaTags.map((e=>e.title))}},methods:{tvShowYear(e){return new Date(e.release_date).getFullYear()},previouslyRated(e){const t=Object.keys(this.database).map((e=>this.database[e].tvShow.id));return t.includes(e)},mostRecentRating(e){return e.ratings.tvShow},sortByRating(e,t){const s=this.mostRecentRating(e)?.rating,a=this.mostRecentRating(t)?.rating;return s<a?1:s>a?-1:0},getWeight(e){const t=this.settings?.weights?.find((t=>t.name===e));return t?t.weight:0},getScore(e){const t=e.toLowerCase(),s=this[t];return parseFloat(s)},getRatingFor(e){if(e&&this.getWeight(e)&&this.getScore(e))return this.getWeight(e)*this.getScore(e)},indexIfSortedIntoArray(e,t){const s=[...t];return s.push(e),s.sort(this.sortByRating),s.indexOf(e)},async addViewingTag(){if(!this.settings.tags||!this.settings.tags["viewing-tags"])return;const e=Object.keys(this.settings.tags["viewing-tags"]).map((e=>this.settings.tags["viewing-tags"][e]));if(!e.find((e=>e.title===this.newViewingTagTitle))){const e=`${(new Date).getTime()}-${crypto.randomUUID()}`,t={path:`settings/tags/viewing-tags/${e}`,value:{title:this.newViewingTagTitle}};this.$store.dispatch("setDBValue",t)}this.newViewingTagTitle=null},async addMediaTag(){if(!this.settings.tags||!this.settings.tags["media-tags"])return;const e=Object.keys(this.settings.tags["media-tags"]).map((e=>this.settings.tags["media-tags"][e]));if(!e.find((e=>e.title===this.newMediaTagTitle))){const e=`${(new Date).getTime()}-${crypto.randomUUID()}`,t={path:`settings/tags/movie-tags/${e}`,value:{title:this.newMediaTagTitle}};this.$store.dispatch("setDBValue",t)}this.newMediaTagTitle=null},toggleViewingTag(e){this.viewingTagChecked(e)?this.selectedViewingTags.splice(this.selectedViewingTags.indexOf(e),1):this.selectedViewingTags.push(e)},toggleMediaTag(e){this.mediaTagChecked(e)?this.selectedMediaTags.splice(this.selectedMediaTags.indexOf(e),1):this.selectedMediaTags.push(e)},previouslyRatedEpisode(e,t){return e.findIndex((e=>e?.episode?.id===t?.id))},async addRating(){this.loading=!0;let e={};this.previousEntry?.ratings&&(e={...this.previousEntry.ratings});const t={date:this.date?this.date:(new Date).getTime(),direction:this.direction?this.direction:5,tvShowId:this.tvShowId,imagery:this.imagery?this.imagery:5,impression:this.impression?this.impression:0,love:this.love?this.love:5,medium:this.medium?this.medium:"Other",overall:this.overall?this.overall:5,performance:this.performance?this.performance:5,rating:this.rating,soundtrack:this.soundtrack?this.soundtrack:5,story:this.story?this.story:5,tags:this.selectedViewingTags,title:this.title,year:this.year,season:this.season,episode:this.episode};if(e.episodes||(e.episodes=[]),"all_seasons"===this.season)for(const o of this.seasons){const s=await oe.Z.get(`https://api.themoviedb.org/3/tv/${this.tvShowId}/season/${o.season_number}?api_key=7a5e8056956703ad202d3a3ddbcfc0e3&language=en-US`);for(const a of s.data.episodes){const s={...t,season:o,episode:a};this.previouslyRatedEpisode(e.episodes,s.episode)>-1?e.episodes.splice(this.previouslyRatedEpisode(e.episodes,s.episode),1,s):e.episodes.push(s)}}else if("all_episodes"===this.episode){const s=await oe.Z.get(`https://api.themoviedb.org/3/tv/${this.tvShowId}/season/${this.season.season_number}?api_key=7a5e8056956703ad202d3a3ddbcfc0e3&language=en-US`);for(const a of s.data.episodes){const s={...t,episode:a};this.previouslyRatedEpisode(e.episodes,s.episode)>-1?e.episodes.splice(this.previouslyRatedEpisode(e.episodes,s.episode),1,s):e.episodes.push(s)}}else this.previouslyRatedEpisode(e.episodes,t.episode)>-1?e.episodes.splice(this.previouslyRatedEpisode(e.episodes,t.episode),1,t):e.episodes.push(t);this.previouslyRatedEpisode(e.episodes,t.episode)>-1?e.episodes.splice(this.previouslyRatedEpisode(e.episodes,t.episode),1,t):e.episodes.push(t);const s=await Hn(e,this.selectedMediaTags);this.$store.dispatch("addToRecentlyRatedTVShows",s.value.tvShow);const a=this.settings?.routeAfterRating?.value;window.scroll({top:top,behavior:"smooth"}),this.$store.commit("setShowHeader",!0),"recentlyViewed"===a?(this.$store.commit("setDBSortValue","watched"),this.$router.push("/db-search")):"allRatings"===a?(this.$store.commit("setDBSortValue","rating"),this.$router.push("/db-search")):"sameYear"===a?(this.$store.commit("setDBSearchValue",`y:${t.year}`),this.$store.commit("setDBSortValue","rating"),this.$router.push("/db-search")):this.$router.push("/")},returnHome(){this.$store.commit("setShowHeader",!0),this.$router.push("/")},viewingTagChecked(e){return!!this.selectedViewingTagNames&&this.selectedViewingTagNames.includes(e.title)},mediaTagChecked(e){return!!this.selectedTVShowTagNames&&this.selectedTVShowTagNames.includes(e.title)},toggleTVShowTagList(){this.$refs.mediaTagList.classList.toggle("collapsed")},async selectSeason(){if("all_seasons"===this.season)this.episodes=[];else{const e=await oe.Z.get(`https://api.themoviedb.org/3/tv/${this.tvShowId}/season/${this.season.season_number}?api_key=7a5e8056956703ad202d3a3ddbcfc0e3&language=en-US`);this.episodes=e.data.episodes}}}};const Cc=(0,h.Z)(xc,[["render",$c]]);var Mc=Cc;const Bc={class:"share-db-results"},Ac={class:"share-header"},Oc=["src"],zc=(0,o._)("h1",{class:"text-light col-12 m-0 px-3 py-2"},"Movie Log",-1),Ic={key:0,class:"terms d-flex justify-content-between align-items-center p-3"},Ec={class:"badge rounded-pill text-bg-dark mx-2"},Fc={class:"badge rounded-pill text-bg-dark mx-2"},Kc={class:"badge rounded-pill text-bg-dark mx-2"},jc={key:0},Uc=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-columns-gap",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M6 1v3H1V1zM1 0a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm14 12v3h-5v-3zm-5-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM6 8v7H1V8zM1 7a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zm14-6v7h-5V1zm-5-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"})],-1),Wc=[Uc],qc={key:1},Yc=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-card-list",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z"}),(0,o._)("path",{d:"M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8m0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"})],-1),Hc=[Yc],Nc={key:1,class:"poster-grid"},Gc=["href"],Zc=["src","alt"],Pc={class:"poster-grid-item-rating-ribbon"},Qc=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-award-fill",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"m8 0 1.669.864 1.858.282.842 1.68 1.337 1.32L13.4 6l.306 1.854-1.337 1.32-.842 1.68-1.858.282L8 12l-1.669-.864-1.858-.282-.842-1.68-1.337-1.32L2.6 6l-.306-1.854 1.337-1.32.842-1.68L6.331.864 8 0z"}),(0,o._)("path",{d:"M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"})],-1),Jc={class:"poster-grid-item-rating"},Xc=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col-1"},"#"),(0,o._)("th",{scope:"col-4"},"Title"),(0,o._)("th",{scope:"col-4"},"Release"),(0,o._)("th",{scope:"col-2"},"Rating")])],-1),ed={class:"col-1",scope:"row"},td={class:"col-4"},sd={class:"col-4"},ad={class:"col-2"};function od(e,t,s,a,i,r){return(0,o.wg)(),(0,o.iD)("div",Bc,[(0,o._)("div",Ac,[r.shareBannerUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"col-12",src:r.shareBannerUrl},null,8,Oc)):(0,o.kq)("",!0),zc]),i.shareObject?((0,o.wg)(),(0,o.iD)("div",Ic,[(0,o._)("div",null,[(0,o._)("span",Ec,(0,n.zw)(i.shareObject.value),1),(0,o._)("span",Fc,(0,n.zw)(i.shareObject.sortValue),1),(0,o._)("span",Kc,(0,n.zw)(i.shareObject.sortOrder),1)]),(0,o._)("button",{class:"keyword-style-toggle btn btn-sm btn-dark",type:"button",onClick:t[0]||(t[0]=e=>i.gridView=!i.gridView)},[i.gridView?((0,o.wg)(),(0,o.iD)("span",qc,Hc)):((0,o.wg)(),(0,o.iD)("span",jc,Wc))])])):(0,o.kq)("",!0),i.gridView?((0,o.wg)(),(0,o.iD)("div",Nc,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.filteredResults,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"poster-frame-wrapper"},[(0,o._)("a",{class:"poster-grid-item",href:`https://www.google.com/search?q=${e.movie.title} movie`,target:"_blank"},[e.movie.poster_path?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"poster-grid-item-image",src:`https://image.tmdb.org/t/p/w500${e.movie.poster_path}`,alt:e.movie.title},null,8,Zc)):(0,o.kq)("",!0),(0,o._)("div",Pc,[Qc,(0,o._)("p",Jc,(0,n.zw)(Math.round(parseFloat(r.mostRecentRating(e).rating))),1)])],8,Gc)])))),128))])):(0,o.kq)("",!0),i.gridView?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("table",{key:2,class:(0,n.C_)(["table table-hover table-striped",i.useDark?"table-dark":"table-light"])},[Xc,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.filteredResults,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("th",ed,(0,n.zw)(t+1),1),(0,o._)("td",td,(0,n.zw)(e.movie.title),1),(0,o._)("td",sd,(0,n.zw)(e.movie.release_date),1),(0,o._)("td",ad,(0,n.zw)(parseFloat(r.mostRecentRating(e).rating).toFixed(2)),1)])))),128))])],2)),r.showMoreButton?((0,o.wg)(),(0,o.iD)("button",{key:3,class:"btn btn-secondary mb-5 mx-3 float-end",onClick:t[1]||(t[1]=(...e)=>r.addMoreResults&&r.addMoreResults(...e))}," More... ")):(0,o.kq)("",!0)])}var id=s(8916),rd={data(){return{shareObject:{},numberOfResultsToShow:50,useDark:(0,id.e7M)(),gridView:!0}},async mounted(){this.$store.commit("setShowHeader",!1);const e=this.$route.params.userDBKey,t=this.$route.params.shareKey,s=await(0,C.U2)((0,C.iU)((0,C.iH)((0,C.N8)()),`${e}/sharedDBSearches/${t}`));s.exists()?this.shareObject=s.val():console.error("No share data")},beforeRouteLeave(){this.$store.commit("setShowHeader",!0)},computed:{shareBannerUrl(){return!!this.shareObject.results&&`https://image.tmdb.org/t/p/original${this.shareObject.results[0].movie.backdrop_path}`},filteredResults(){if(!this.shareObject.results)return[];const e=this.shareObject.results.filter((e=>e.ratings[0]?.rating));return e.slice(0,this.numberOfResultsToShow)},showMoreButton(){return!!this.shareObject.results&&this.shareObject.results.length>this.numberOfResultsToShow}},methods:{mostRecentRating(e){let t=e.ratings[0];return e.ratings.forEach((e=>{t.date?e.date&&e.date>t.date&&(t=e):t=e})),t},addMoreResults(){this.numberOfResultsToShow=this.numberOfResultsToShow+50,this.$nextTick((()=>{window.scrollBy({top:500,behavior:"smooth"})}))}}};const nd=(0,h.Z)(rd,[["render",od]]);var ld=nd;const cd=(0,a.ri)(L);cd.use(K),cd.use(M.ZP,{clientId:"495603923646-j49hr3l4m6l9grbvrnp7fr652hon2um3.apps.googleusercontent.com"}),cd.use(U.ZP),cd.use(Y.Z,{});const dd=()=>{const e=window.localStorage.getItem("movieLogCurrentLog");e&&K.commit("setCurrentLog",e);const t=window.localStorage.getItem("databaseTopKey");return K.getters.databaseTopKey?(K.dispatch("initializeDB"),!0):!!t&&(K.commit("setDatabaseTopKey",t),K.dispatch("initializeDB"),!0)},ud=[{path:"/",component:ct,meta:{requiresLogin:!0},beforeEnter:(e,t,s)=>{K.commit("setGoHome",!1),dd()?s():s("/login")}},{path:"/login",component:vt,meta:{requiresLogin:!1}},{name:"Settings",path:"/settings",component:fi,meta:{requiresLogin:!0},beforeEnter:(e,t,s)=>{dd()?s():s("/login")}},{path:"/db-search",component:Ro,meta:{requiresLogin:!0},beforeEnter:(e,t,s)=>{dd()?s():s("/login")}},{path:"/rate-movie",component:Zn,meta:{requiresLogin:!0},beforeEnter:(e,t,s)=>{dd()?s():s("/login")}},{path:"/rate-tv-show",component:Mc,meta:{requiresLogin:!0},beforeEnter:(e,t,s)=>{dd()?s():s("/login")}},{path:"/pick-media/:newEntrySearchResults",component:Mi,meta:{requiresLogin:!0},beforeEnter:(e,t,s)=>{dd()?s():s("/login")}},{path:"/share/:userDBKey/:shareKey",component:ld,meta:{requiresLogin:!1}}],hd=(0,j.p7)({history:(0,j.r5)(),routes:ud});cd.use(hd);W.S({app:cd,dsn:"https://25a3dc0387f04fd5923f226394a41e7d@o4504483013525504.ingest.sentry.io/4504642713944064",integrations:[new q.gE({tracePropagationTargets:["localhost","surge",/^\//]})],tracesSampleRate:1,sampleRate:1,maxValueLength:8e3}),cd.mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,i){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],i=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(n=!1,i<r&&(r=i));if(n){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,o,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,i,r=a[0],n=a[1],l=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(l)var d=l(s)}for(t&&t(a);c<r.length;c++)i=r[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},a=self["webpackChunkmovie_log"]=self["webpackChunkmovie_log"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(5235)}));a=s.O(a)})();
//# sourceMappingURL=app.a72df35e.js.map